00001AF2 Starting Address
Assembler used: EASy68K Editor/Assembler v5.16.01
Created On: 11/01/2022 18:14:29

00000000                             1  ; =============================================================================
00000000                             2  ; TITLE    : GAME OF LIFE APPLICATION
00000000                             3  ; AUTHOR   : ANTONI BURGUERA
00000000                             4  ; CREATION : 05-JULY-2021
00000000                             5  ; =============================================================================
00000000                             6  
00001000                             7              ORG     $1000
00001000                             8  
00001000                             9  ; --- CODE INCLUDES -----------------------------------------------------------
00001000                            10  
00001000                            11              INCLUDE "SYSCONST.X68"          ; SYSTEM CONSTANTS
00001000                            12  ; =============================================================================
00001000                            13  ; TITLE    : SYSTEM CONSTANTS
00001000                            14  ; AUTHOR   : ANTONI BURGUERA
00001000                            15  ; HISTORY  : 05-JULY-2021 - CREATION
00001000                            16  ; COMMENTS : * MOUVAL AND MOUEDGE FORMAT IS AS FOLLOWS:
00001000                            17  ;              +---+---+---+---+---+---+---+---+
00001000                            18  ;              | 7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 |
00001000                            19  ;              +---+---+---+---+---+---+---+---+
00001000                            20  ;              \-------------------/ |   |   |
00001000                            21  ;                        |           |   |   +-- LEFT MOUSE BUTTON
00001000                            22  ;                        |           |   +------ RIGHT MOUSE BUTTON
00001000                            23  ;                        |           +---------- CENTRAL MOUSE BUTTON
00001000                            24  ;                        +---------------------- 0
00001000                            25  ;              A "1" IN ONE OF THESE BITS IN MOUVAL MEANS "BUTTON PRESSED".
00001000                            26  ;              A "0" IN ONE OF THESE BITS IN MOUVAL MEANS "BUTTON NOT PRESSED".
00001000                            27  ;              A "1" IN ONE OF THESE BITS IN MOUEDGE MEANS "BUTTON CLICKED".
00001000                            28  ;              A "0" IN ONE OF THESE BITS IN MOUEDGE MEANS "BUTTON NOT CLICKED".
00001000                            29  ;              A "CLICK" IS A CHANGE FROM 0 TO 1 IN SUBSEQUENT UPDATES.
00001000                            30  ;              BOTH MOUVEL AND MOUEDGE ARE UPDATED BY TRAP #MOUTRAP
00001000                            31  ;
00001000                            32  ;            * MASKS AND BIT POSITIONS ARE DEFINED TO EASE MOUSE ACCESS. FOR
00001000                            33  ;              EXAMPLE, ONE CAN DO THE FOLLOWING TO CHECK IF THE LEFT BUTTON
00001000                            34  ;              IS PRESSED:
00001000                            35  ;
00001000                            36  ;              BTST.L #MOUBITLF,(MOUVAL)
00001000                            37  ;              BNE ...
00001000                            38  ;
00001000                            39  ;              ALTERNATIVELY, ONE CAN ALSO DO THE FOLLOWING DEPENDING ON THE
00001000                            40  ;              CONTEXT:
00001000                            41  ;
00001000                            42  ;              MOVE.B  (MOUVAL),D0
00001000                            43  ;              AND.B   #MOUMSKLF,D0
00001000                            44  ;              BNE ...
00001000                            45  ; =============================================================================
00001000                            46  
00001000                            47  ; --- SCREEN RELATED CONSTANTS ------------------------------------------------
00001000                            48  
00001000  =00000000                 49  SCRTRAP     EQU     0                       ; SCREEN REFRESH TRAP NUMBER
00001000  =00000320                 50  SCRWIDTH    EQU     800                     ; SCREEN WIDTH (PIXELS)
00001000  =00000258                 51  SCRHEIGH    EQU     600                     ; SCREEN HEIGHT (PIXELS)
00001000                            52  
00001000                            53  ; --- MOUSE RELATED CONSTANTS -------------------------------------------------
00001000                            54  
00001000  =00000001                 55  MOUTRAP     EQU     1                       ; MOUSE QUERY TRAP NUMBER
00001000  =00000001                 56  MOUMSKLF    EQU     %00000001               ; LEFT MOUSE BUTTON MASK
00001000  =00000002                 57  MOUMSKRT    EQU     %00000010               ; RIGHT MOUSE BUTTON MASK
00001000  =00000004                 58  MOUMSKMD    EQU     %00000100               ; MIDDLE MOUSE BUTTON MASL
00001000  =00000000                 59  MOUBITLF    EQU     0                       ; LEFT MOUSE BUTTON BIT POSITION
00001000  =00000001                 60  MOUBITRT    EQU     1                       ; RIGHT MOUSE BUTTON BIT POSITION
00001000  =00000002                 61  MOUBITMD    EQU     2                       ; MIDDLE MOUSE BUTTON BIT POSITION
00001000  =00000002                 62  -------------------- end include --------------------
00001000                            63              INCLUDE "SYSTEM.X68"            ; SYSTEM CODE
00001000                            64  ; =============================================================================
00001000                            65  ; TITLE    : SYSTEM MANAGEMENT (SYSTEM CODE)
00001000                            66  ; AUTHOR   : ANTONI BURGUERA
00001000                            67  ; HISTORY  : 05-JULY-2021 - CREATION
00001000                            68  ; COMMENTS : IT IS DIVIDED IN THREE BLOCKS:
00001000                            69  ;            - SYS : GENERIC.
00001000                            70  ;            - SCR : SCREEN MANAGEMENT.
00001000                            71  ;            - MOU : MOUSE MANAGEMENT
00001000                            72  ;            THE FORMAT OF MOUVAL AND MOUEDGE IS DESCRIBED IN SYSCONST.
00001000                            73  ; =============================================================================
00001000                            74  
00001000                            75  ; -----------------------------------------------------------------------------
00001000                            76  SYSINIT
00001000                            77  ; INITIALIZES THE SYSTEM AS FOLLOWS:
00001000                            78  ; * DISABLES INTERRUPTS
00001000                            79  ; * CALLS SCRINIT
00001000                            80  ; * CALLS MOUINIT
00001000                            81  ; * ENABLES SIMULATOR EXCEPTION PROCESSING
00001000                            82  ; * SWITCHES TO USER
00001000                            83  ; INPUT    - NONE
00001000                            84  ; OUTPUT   - NONE
00001000                            85  ; MODIFIES - NONE
00001000                            86  ; NOTE     - NOTE THAT INTERRUPTS REMAIN DISABLED AFTER THIS SUBROUTINE
00001000                            87  ; -----------------------------------------------------------------------------
00001000                            88  
00001000                            89  ; TODO : PLACE YOUR CODE HERE
00001000  40E7                      90      MOVE.W SR,-(A7)
00001002                            91      
00001002  0257 DFFF                 92      AND.W    #$DFFF,(A7)
00001006                            93      ;Desabilitamos interrupciones
00001006  0057 0700                 94      ORI.W    #$0700,(A7)
0000100A                            95      ;Guardamos los registros
0000100A  48E7 C000                 96      MOVEM.L D0-D1,-(A7)
0000100E                            97      
0000100E                            98      
0000100E                            99      
0000100E                           100      ;Llamamos a las subrutinas
0000100E  4EB9 0000108A            101      JSR SCRINIT
00001014  4EB9 0000102A            102      JSR MOUINIT
0000101A                           103      
0000101A                           104      ;activamos el simulador de excepciones
0000101A  103C 0020                105      MOVE.B #32,D0
0000101E  123C 0005                106      MOVE.B #5,D1
00001022  4E4F                     107      TRAP #15
00001024                           108      
00001024                           109      ;cambiamos a modo usuario
00001024                           110      
00001024  4CDF 0003                111      MOVEM.L (A7)+,D0-D1
00001028  4E73                     112      RTE
0000102A                           113  
0000102A                           114  
0000102A                           115  
0000102A                           116  
0000102A                           117  
0000102A                           118  
0000102A                           119  
0000102A                           120  
0000102A                           121  ; =============================================================================
0000102A                           122  ; MOUSE MANAGEMENT (SYSTEM CODE)
0000102A                           123  ; =============================================================================
0000102A                           124  
0000102A                           125  ; -----------------------------------------------------------------------------
0000102A                           126  MOUINIT
0000102A                           127  ; INITIALIZES MOUSE AS FOLLOWS:
0000102A                           128  ; * STORES CURRENT MOUSE POSITION AND BUTTON STATUS INTO MOUY, MOUX AND MOUVAL
0000102A                           129  ; * CLEARS MOUEDGE
0000102A                           130  ; * INSTALLS MOUREAD INTO TRAP #MOUTRAP
0000102A                           131  ; INPUT    - NONE
0000102A                           132  ; OUTPUT   - NONE
0000102A                           133  ; MODIFIES - ALL REGISTERS CAN BE MODIFIED
0000102A                           134  ; -----------------------------------------------------------------------------
0000102A                           135  
0000102A                           136  ; TODO : PLACE YOUR CODE HERE
0000102A                           137  
0000102A                           138      ;Guardamos los registros
0000102A  48E7 C000                139      MOVEM.L D0-D1,-(A7)
0000102E                           140  
0000102E                           141      ;Posición actual del mouse        
0000102E  103C 003D                142      MOVE.B #61,D0
00001032  4201                     143      CLR.B D1
00001034  4E4F                     144      TRAP #15
00001036                           145      
00001036                           146      ;Guardamos los valores
00001036  23C1 00001B0C            147      MOVE.L  D1,(MOUY)
0000103C                           148      
0000103C  13C0 00001B10            149      MOVE.B D0,(MOUVAL)
00001042                           150      
00001042                           151      ;Reestablecemos MOUEDGE
00001042  13FC 0000 00001B11       152      MOVE.B #0,(MOUEDGE)
0000104A                           153      
0000104A                           154      ;Instalamos MOUTRAP 
0000104A  21FC 00001058 0084       155      MOVE.L  #MOUREAD,($80+MOUTRAP*4)
00001052                           156      
00001052  4CDF 0003                157      MOVEM.L (A7)+,D0-D1
00001056  4E75                     158      RTS
00001058                           159  
00001058                           160  ; -----------------------------------------------------------------------------
00001058                           161  MOUREAD
00001058                           162  ; MOUSE READING TRAP SERVICE ROUTINE. IT DOES THE FOLLOWING:
00001058                           163  ; * STORES CURRENT MOUSE POSITION INTO MOUY AND MOUX.
00001058                           164  ; * STORES CURRENT BUTTON STATUS INTO MOUVAL
00001058                           165  ; * COMPUTES AND STORES MOUEDGE
00001058                           166  ; INPUT    - NONE
00001058                           167  ; OUTPUT   - NONE
00001058                           168  ; MODIFIES - NONE
00001058                           169  ; -----------------------------------------------------------------------------
00001058                           170  
00001058                           171  ; TODO : PLACE YOUR CODE HERE
00001058                           172  
00001058  48E7 C000                173      MOVEM.L D0-D1, -(A7)
0000105C                           174  
0000105C                           175      ;OBTENIM POSICIO RATOLI
0000105C  103C 003D                176      MOVE.B #61,D0
00001060  4201                     177      CLR.B D1
00001062  4E4F                     178      TRAP #15
00001064                           179  
00001064  23C1 00001B0C            180      MOVE.L D1,(MOUY)
0000106A  4639 00001B10            181      NOT.B MOUVAL
00001070  1200                     182      MOVE.B D0,D1
00001072  C239 00001B10            183      AND.B MOUVAL,D1
00001078  13C1 00001B11            184      MOVE.B D1, (MOUEDGE)
0000107E  13C0 00001B10            185      MOVE.B D0, (MOUVAL)
00001084                           186  
00001084                           187  
00001084                           188      ;RESTAURAM I TORNAM
00001084  4CDF 0003                189      MOVEM.L (A7)+, D0-D1
00001088  4E73                     190      RTE
0000108A                           191  
0000108A                           192  
0000108A                           193      
0000108A                           194  
0000108A                           195  
0000108A                           196  
0000108A                           197  
0000108A                           198  
0000108A                           199  
0000108A                           200  
0000108A                           201  
0000108A                           202  
0000108A                           203  ; =============================================================================
0000108A                           204  ; SCREEN MANAGEMENT (SYSTEM CODE)
0000108A                           205  ; =============================================================================
0000108A                           206  
0000108A                           207  ; -----------------------------------------------------------------------------
0000108A                           208  SCRINIT
0000108A                           209  ; INITIALIZES THE SCREEN, SCREEN-RELATED INTERRUPT AND VARS AS FOLLOWS:
0000108A                           210  ; * INSTALLS SCRUPD INTO TRAP #SCRTRAP
0000108A                           211  ; * SETS OUTPUT RESOLUTION TO SCRWIDTH*SCRHEIGH
0000108A                           212  ; * SETS OUTPUT TO WINDOWED MODE
0000108A                           213  ; * ENABLES DOUBLE BUFFER AND CLEARS BOTH SCREEN BUFFERS
0000108A                           214  ; INPUT    - NONE
0000108A                           215  ; OUTPUT   - NONE
0000108A                           216  ; MODIFIES - ALL REGISTERS CAN BE MODIFIED
0000108A                           217  ; -----------------------------------------------------------------------------
0000108A  21FC 000010C2 0080       218              MOVE.L  #SCRUPD,($80+SCRTRAP*4) ; INSTALL TRAP
00001092  223C 03200258            219              MOVE.L  #SCRWIDTH<<16|SCRHEIGH,D1 ; SET RESOLUTION
00001098  103C 0021                220              MOVE.B  #33,D0
0000109C  4E4F                     221              TRAP    #15
0000109E  7201                     222              MOVE.L  #1,D1                   ; SET WINDOWED MODE
000010A0  4E4F                     223              TRAP    #15
000010A2  323C FF00                224              MOVE.W  #$FF00,D1               ; CLEAR VISIBLE BUFFER
000010A6  103C 000B                225              MOVE.B  #11,D0
000010AA  4E4F                     226              TRAP    #15
000010AC  123C 0011                227              MOVE.B  #17,D1                  ; ENABLE DOUBLE BUFFER
000010B0  103C 005C                228              MOVE.B  #92,D0
000010B4  4E4F                     229              TRAP    #15
000010B6  323C FF00                230              MOVE.W  #$FF00,D1               ; CLEAR HIDDEN BUFFER
000010BA  103C 000B                231              MOVE.B  #11,D0
000010BE  4E4F                     232              TRAP    #15
000010C0  4E75                     233              RTS
000010C2                           234  
000010C2                           235  ; -----------------------------------------------------------------------------
000010C2                           236  SCRUPD
000010C2                           237  ; TRAP SERVICE ROUTINE IN CHARGE OF VISUALIZING CURRENT FRAME AND CLEARING
000010C2                           238  ; BUFFER FOR THE NEXT ONE. PERFORMS TWO TASKS:
000010C2                           239  ; * CLEARS ACTIVE (HIDDEN) GRAPHICS BUFFER
000010C2                           240  ; * SWITCHES ACTIVE AND VISIBLE GRAPHICS BUFFER
000010C2                           241  ; INPUT    - NONE
000010C2                           242  ; OUTPUT   - NONE
000010C2                           243  ; MODIFIES - NONE
000010C2                           244  ; -----------------------------------------------------------------------------
000010C2  48A7 C000                245              MOVEM.W D0-D1,-(A7)
000010C6  103C 005E                246              MOVE.B  #94,D0                  ; UPDATE DOUBLE BUFFER
000010CA  4E4F                     247              TRAP    #15
000010CC  323C FF00                248              MOVE.W  #$FF00,D1               ; CLEAR HIDDEN BUFFER
000010D0  103C 000B                249              MOVE.B  #11,D0
000010D4  4E4F                     250              TRAP    #15
000010D6  4C9F 0003                251              MOVEM.W (A7)+,D0-D1
000010DA  4E73                     252              RTE
000010DC                           253  
000010DC                           254  
000010DC                           255  
000010DC                           256  
000010DC                           257  
000010DC                           258  
000010DC                           259  
000010DC                           260  
000010DC                           261  
000010DC                           262  
000010DC                           263  
000010DC                           264  -------------------- end include --------------------
000010DC                           265              INCLUDE "CONST.X68"             ; USER CONSTANTS
000010DC                           266  ; =============================================================================
000010DC                           267  ; TITLE    : USER CONSTANTS
000010DC                           268  ; AUTHOR   : ANTONI BURGUERA
000010DC                           269  ; HISTORY  : 05-JULY-2021 - CREATION
000010DC                           270  ; COMMENTS : * MOST OF THE CONSTANTS HELP IN PRODUCING A CLEAN CODE
000010DC                           271  ;              IN ACCORDANCE TO THE ASSIGNMENT SPECS, THOUGH THEIR USE IS
000010DC                           272  ;              NOT MANDATORY AS LONG AS THE ASSIGNMENT SPECS ARE FOLLOWED.
000010DC                           273  ;
000010DC                           274  ;            * THE UICOLORS ARE THE BASIC USER INTERFACE COLORS. USING THEM
000010DC                           275  ;              WILL LEAD TO A VISUALLY CONSISTENT USER INTERFACE.
000010DC                           276  ;
000010DC                           277  ;            * THE CHARACTER SIZES SPECIFY WIDTH AND HEIGHT IN PIXELS OF THE
000010DC                           278  ;              TEXT CHARACTERS. THIS SIZE DEPENDS ON THE SYSTEM (WINDOWS) FONTS
000010DC                           279  ;              AND CAN CHANGE FROM ONE COMPUTER TO ANOTHER. FEEL FREE TO ADAPT
000010DC                           280  ;              THEM TO YOUR OWN COMPUTER.
000010DC                           281  ;
000010DC                           282  ;            * CHARACTER SIZES ARE SPECIFIED AS AN EXPONENT AND THE SIZE ITSELF
000010DC                           283  ;              THE EXPONENT IS USEFUL TO MULTIPLY/DIVIDE, WHEN NECESSARY,
000010DC                           284  ;              USING SHIFTS. DEPENDING ON YOUR SYSTEM (WINDOWS) FONTS, CHAR
000010DC                           285  ;              SIZES MAY NOT BE POWER OF TWO. IF THIS IS THE CASE, DO YOUR BEST
000010DC                           286  ;              TO AVOID MULU AND DIVU.
000010DC                           287  ;
000010DC                           288  ;            * MOST OF THE GRD CONSTANTS ARE EXPRESSIONS TO EASE TESTING
000010DC                           289  ;              DIFFERENT RESOLUTIONS. IF TESTS WITH OTHER RESOLUTIONS ARE
000010DC                           290  ;              PERFORMED, TAKE INTO ACCOUNT THAT ALL EXPRESSIONS MUST EVALUATE
000010DC                           291  ;              TO INTEGER. IF THEY DON'T, UNEXPECTED RESULTS CAN HAPPEN.
000010DC                           292  ; =============================================================================
000010DC                           293  
000010DC                           294  ; --- UI COLORS ---------------------------------------------------------------
000010DC                           295  
000010DC  =00000000                296  CLRBLACK    EQU     $00000000               ; BLACK
000010DC  =00FFFFFF                297  CLRWHITE    EQU     $00FFFFFF               ; WHITE
000010DC  =00005500                298  CLRDKGRN    EQU     $00005500               ; DARK GREEN
000010DC  =00006600                299  CLRMDGRN    EQU     $00006600               ; MEDIUN GREEN
000010DC  =0000AA00                300  CLRLTGRN    EQU     $0000AA00               ; LIGHT GREEN
000010DC  =00FF0000                301  CLRLTBLU    EQU     $00FF0000               ; LIGHT BLUE
000010DC  =000000FF                302  CLRLTRED    EQU     $000000FF               ; LIGHT RED
000010DC                           303  
000010DC                           304  ; --- CHARACTER SIZES ---------------------------------------------------------
000010DC                           305  
000010DC  =00000004                306  CHRSHHEI    EQU     4                       ; CHARACTER HEIGHT AS EXPONENT OF 2
000010DC  =00000003                307  CHRSHWID    EQU     3                       ; CHARACTER WIDTH AS EXPONENT OF 2
000010DC  =00000010                308  CHRHEIGH    EQU     1<<CHRSHHEI             ; CHARACTER HEIGHT
000010DC  =00000008                309  CHRWIDTH    EQU     1<<CHRSHWID             ; CHARACTER WIDTH
000010DC                           310  
000010DC                           311  ; --- BUTTON ------------------------------------------------------------------
000010DC                           312  
000010DC  =00000004                313  BTNPENWD    EQU     4                       ; BUTTON LINE WIDTH
000010DC  =00005500                314  BTNPENCL    EQU     CLRDKGRN                ; BUTTON LINE COLOR
000010DC  =0000AA00                315  BTNSELCL    EQU     CLRLTGRN                ; BUTTON SELECTED FILL COLOR
000010DC  =00006600                316  BTNPRSCL    EQU     CLRMDGRN                ; BUTTON PRESSED FILL COLOR
000010DC  =00000006                317  BTNSZVDB    EQU     6                       ; SIZE (BYTES) OF VDB
000010DC                           318  
000010DC                           319  ; --- BUTTON LIST -------------------------------------------------------------
000010DC                           320  
000010DC  =0000000A                321  BTLMXVDB    EQU     10                      ; SIZE OF THE BUTTON LIST (ITEMS)
000010DC  =00000028                322  BTLVERSZ    EQU     40                      ; HEIGHT OF BUTTONS
000010DC  =0000000A                323  BTLVEMRG    EQU     10                      ; VERTICAL VISUAL MARGIN (TOP&BOT)
000010DC  =0000000A                324  BTLHOMRG    EQU     10                      ; HORIZONTAL VISUAL MARGIN (L & R)
000010DC                           325  
000010DC                           326  ; --- APPLICATION -------------------------------------------------------------
000010DC                           327  
000010DC  =00000000                328  GOLSPAUS    EQU     0                       ; PAUSED STATE
000010DC  =00000001                329  GOLSEXEC    EQU     1                       ; EXECUTION STATE
000010DC  =000000FA                330  GOLMAXGN    EQU     250                     ; MAXIMUM NUMBER OF GENERATIONS
000010DC                           331  
000010DC                           332  ; --- GRID --------------------------------------------------------------------
000010DC                           333  
000010DC  =00FF0000                334  GRDCOLP1    EQU     CLRLTBLU                ; PLAYER 1 COLOR
000010DC  =000000FF                335  GRDCOLP2    EQU     CLRLTRED                ; PLAYER 2 COLOR
000010DC  =00000006                336  GRDSHWID    EQU     6                       ; SHIFT TO ACHIEVE GRDWIDTH
000010DC  =00000005                337  GRDSHHEI    EQU     5                       ; SHIFT TO ACHIEVE GRDHEIGH
000010DC  =00000040                338  GRDWIDTH    EQU     1<<GRDSHWID             ; NUMBER OF GRID COLUMNS
000010DC  =00000020                339  GRDHEIGH    EQU     1<<GRDSHHEI             ; NUMBER OF ROWS
000010DC  =0000003F                340  GRDMSWID    EQU     GRDWIDTH-1              ; MASK TO GET X FROM GRID OFFSET
000010DC  =0000001F                341  GRDMSHEI    EQU     GRDHEIGH-1              ; MASK TO GET Y FROM GRID OFFSET
000010DC  =00000300                342  GRDPXWID    EQU     768                     ; GRID DISPLAY WIDTH (PIXELS)
000010DC  =00000180                343  GRDPXHEI    EQU     GRDHEIGH*GRDPXWID/GRDWIDTH ; GRID DISPLAY HEIGHT (PIXELS)
000010DC  =0000000C                344  GRDSZCEL    EQU     GRDPXWID/GRDWIDTH       ; GRID CELL SIZE (PIXELS)
000010DC  =0000006E                345  GRDVEMRG    EQU     3*BTLVEMRG+2*BTLVERSZ   ; TOP MARGIN (2 BUTTON ROWS)
000010DC  =00000010                346  GRDXOFF     EQU     (SCRWIDTH-GRDPXWID)/2   ; X OFFSETS TO DISPLAY CENTERED GRID
000010DC  =0000009E                347  GRDYOFF     EQU     (SCRHEIGH-GRDPXHEI+GRDVEMRG-BTLVEMRG)/2 ; Y OFFSET CENT. GRD
000010DC  =00000002                348  GRDSCP1X    EQU     GRDXOFF/CHRWIDTH        ; PLAYER 1 SCORE X (CHAR RESOL.)
000010DC  =00000009                349  GRDSCP1Y    EQU     GRDYOFF/CHRHEIGH        ; PLAYER 1 SCORE Y (CHAR RESOL.)
000010DC  =0000005E                350  GRDSCP2X    EQU     (GRDXOFF+GRDPXWID)/CHRWIDTH-4 ; PLAYER 2 SCORE X (CHAR RES.)
000010DC  =00000009                351  GRDSCP2Y    EQU     GRDYOFF/CHRHEIGH        ; PLAYER 2 SCORE Y (CHAR RESOL.)
000010DC  =00000030                352  GRDSCNGX    EQU     (SCRWIDTH/(CHRWIDTH*2))-2 ; NUM. GENER. X (CHAR RESOL.)
000010DC  =00000009                353  GRDSCNGY    EQU     GRDYOFF/CHRHEIGH        ; NUM. GENER. Y (CHAR RESOL.)
000010DC  =00000009                354  -------------------- end include --------------------
000010DC                           355              INCLUDE "UTIL.X68"              ; UTILITY CODE
000010DC                           356  ; =============================================================================
000010DC                           357  ; TITLE    : UTILITY SUBROUTINES
000010DC                           358  ; AUTHOR   : ANTONI BURGUERA
000010DC                           359  ; HISTORY  : 05-JULY-2021 - CREATION
000010DC                           360  ; COMMENTS : GENERAL PURPOSE SUBROUTINES.
000010DC                           361  ; =============================================================================
000010DC                           362  
000010DC                           363  ; -----------------------------------------------------------------------------
000010DC                           364  UTLINIT
000010DC                           365  ; INITIALIZES UTILITIES.
000010DC                           366  ; INPUT    : NONE
000010DC                           367  ; OUTPUT   : NONE
000010DC                           368  ; MODIFIES : NONE
000010DC                           369  ; -----------------------------------------------------------------------------
000010DC  4239 00001B12            370              CLR.B   (UTLRNDIX)
000010E2  4E75                     371              RTS
000010E4                           372  
000010E4                           373  ; -----------------------------------------------------------------------------
000010E4                           374  UTLSTRLN
000010E4                           375  ; COMPUTES THE LENGTH OF A ZERO-TERMINATED STRING
000010E4                           376  ; INPUT    - A1 POINTER TO THE STRING
000010E4                           377  ; OUTPUT   - D0.W STRING LENGTH
000010E4                           378  ; MODIFIES - NONE (ASIDE OF OUTPUT)
000010E4                           379  ; -----------------------------------------------------------------------------
000010E4  2F09                     380              MOVE.L  A1,-(A7)
000010E6  4240                     381              CLR.W   D0
000010E8  4A19                     382  .LOOP       TST.B   (A1)+
000010EA  6700 0006                383              BEQ     .END
000010EE  5240                     384              ADDQ.W  #1,D0
000010F0  60F6                     385              BRA     .LOOP
000010F2  225F                     386  .END        MOVE.L  (A7)+,A1
000010F4  4E75                     387              RTS
000010F6                           388  
000010F6                           389  ; -----------------------------------------------------------------------------
000010F6                           390  UTLRAND
000010F6                           391  ; PROVIDES A PSEUDO-RANDOM COIN FLIP (RETURNS 1 OR 2)
000010F6                           392  ; INPUT    - NONE
000010F6                           393  ; OUTPUT   - D1.L RANDOM VALUE (ONLY BYTE)
000010F6                           394  ; MODIFIES - NONE (ASIDE OF OUTPUT)
000010F6                           395  ; -----------------------------------------------------------------------------
000010F6  2F08                     396              MOVE.L  A0,-(A7)
000010F8  41F9 00001114            397              LEA     .RANDVEC,A0
000010FE  4281                     398              CLR.L   D1
00001100  1239 00001B12            399              MOVE.B  (UTLRNDIX),D1
00001106  1230 1800                400              MOVE.B  (A0,D1.L),D1
0000110A  5239 00001B12            401              ADDQ.B  #1,(UTLRNDIX)
00001110  205F                     402              MOVE.L  (A7)+,A0
00001112  4E75                     403              RTS
00001114                           404  
00001114= 02 02 02 02 01 02 ...    405  .RANDVEC    DC.B    2, 2, 2, 2, 1, 2, 1, 2
0000111C= 01 01 01 02 01 01 ...    406              DC.B    1, 1, 1, 2, 1, 1, 1, 2
00001124= 02 01 02 01 01 02 ...    407              DC.B    2, 1, 2, 1, 1, 2, 2, 1
0000112C= 02 01 02 01 01 01 ...    408              DC.B    2, 1, 2, 1, 1, 1, 1, 2
00001134= 02 02 01 01 02 02 ...    409              DC.B    2, 2, 1, 1, 2, 2, 1, 1
0000113C= 02 01 02 02 02 01 ...    410              DC.B    2, 1, 2, 2, 2, 1, 1, 1
00001144= 02 02 01 01 01 01 ...    411              DC.B    2, 2, 1, 1, 1, 1, 1, 2
0000114C= 01 01 01 02 01 02 ...    412              DC.B    1, 1, 1, 2, 1, 2, 1, 2
00001154= 02 02 02 02 01 02 ...    413              DC.B    2, 2, 2, 2, 1, 2, 1, 2
0000115C= 01 01 02 02 02 01 ...    414              DC.B    1, 1, 2, 2, 2, 1, 2, 1
00001164= 02 02 02 01 01 02 ...    415              DC.B    2, 2, 2, 1, 1, 2, 1, 1
0000116C= 01 02 01 01 01 02 ...    416              DC.B    1, 2, 1, 1, 1, 2, 1, 2
00001174= 01 02 02 01 02 01 ...    417              DC.B    1, 2, 2, 1, 2, 1, 2, 2
0000117C= 01 02 01 02 01 01 ...    418              DC.B    1, 2, 1, 2, 1, 1, 2, 1
00001184= 01 02 01 01 01 01 ...    419              DC.B    1, 2, 1, 1, 1, 1, 1, 1
0000118C= 02 01 01 02 01 01 ...    420              DC.B    2, 1, 1, 2, 1, 1, 1, 2
00001194= 02 01 01 01 01 02 ...    421              DC.B    2, 1, 1, 1, 1, 2, 1, 1
0000119C= 01 01 02 01 01 02 ...    422              DC.B    1, 1, 2, 1, 1, 2, 1, 2
000011A4= 02 02 01 01 02 02 ...    423              DC.B    2, 2, 1, 1, 2, 2, 2, 2
000011AC= 01 01 02 01 02 02 ...    424              DC.B    1, 1, 2, 1, 2, 2, 1, 2
000011B4= 01 02 01 02 02 02 ...    425              DC.B    1, 2, 1, 2, 2, 2, 2, 1
000011BC= 01 01 02 02 01 01 ...    426              DC.B    1, 1, 2, 2, 1, 1, 2, 1
000011C4= 02 02 01 02 01 02 ...    427              DC.B    2, 2, 1, 2, 1, 2, 1, 1
000011CC= 02 01 02 01 01 02 ...    428              DC.B    2, 1, 2, 1, 1, 2, 1, 2
000011D4= 01 01 02 02 02 01 ...    429              DC.B    1, 1, 2, 2, 2, 1, 1, 1
000011DC= 01 01 02 02 01 02 ...    430              DC.B    1, 1, 2, 2, 1, 2, 1, 2
000011E4= 01 02 01 01 01 02 ...    431              DC.B    1, 2, 1, 1, 1, 2, 1, 1
000011EC= 02 01 01 02 01 02 ...    432              DC.B    2, 1, 1, 2, 1, 2, 2, 2
000011F4= 02 01 01 01 02 02 ...    433              DC.B    2, 1, 1, 1, 2, 2, 1, 1
000011FC= 02 02 02 01 02 02 ...    434              DC.B    2, 2, 2, 1, 2, 2, 1, 2
00001204= 01 02 01 01 02 01 ...    435              DC.B    1, 2, 1, 1, 2, 1, 2, 2
0000120C= 02 02 02 01 01 01 ...    436              DC.B    2, 2, 2, 1, 1, 1, 1, 2
0000120C= 02 02 02 01 01 01 ...    437  -------------------- end include --------------------
00001214                           438              INCLUDE "BUTTON.X68"            ; BUTTON MANAGEMENT
00001214                           439  ; =============================================================================
00001214                           440  ; TITLE    : BUTTON MANAGEMENT
00001214                           441  ; AUTHOR   : ANTONI BURGUERA
00001214                           442  ; HISTORY  : 05-JULY-2021 - CREATION
00001214                           443  ; COMMENTS : * A BUTTON IS DEFINED BY A STATIC DATA BLOCK (SDB), WHICH DOES NOT
00001214                           444  ;              CHANGE OVER TIME, AND A VARIABLE DATA BLOCK (VDB), THAT CAN
00001214                           445  ;              CHANGE OVER TIME. CHANGES IN THE VDB ARE PRODUCED WHEN CALLING
00001214                           446  ;              SUBROUTINE BTNUPD.
00001214                           447  ;
00001214                           448  ;            * THE BUTTON SDB (CAN BE IN ROM) HAS THE FOLLOWING FIELDS. THE
00001214                           449  ;              NUMBER DENOTES THE OFFSET WITH RESPECT TO THE SDB START:
00001214                           450  ;
00001214                           451  ;                +0  - WORD - YTOP COORDINATE (PIXELS)
00001214                           452  ;                +2  - WORD - XLEFT COORDINATE (PIXELS)
00001214                           453  ;                +4  - WORD - HEIGHT (PIXELS)
00001214                           454  ;                +6  - WORD - WIDTH (PIXELS)
00001214                           455  ;                +8  - LONG - CALLBACK POINTER
00001214                           456  ;                +12 - BYTE STRING - ZERO TERMINATED STRING. TEXT TO SHOW.
00001214                           457  ;
00001214                           458  ;            * THE BUTTON VDB (MUST BE IN RAM) IS:
00001214                           459  ;
00001214                           460  ;                +0 - LONG - POINTER TO THE STATIC DATABLOCK
00001214                           461  ;                +4 - BYTE - STATUS WITH FORMAT XXXXXCPI WHERE:
00001214                           462  ;                            - I (BIT 0) - 1=MOUSE INSIDE, 0=MOUSE OUTSIDE
00001214                           463  ;                            - P (BIT 1) - 1=MOUSE PRESSED INSIDE
00001214                           464  ;                                          0=MOUSE NOT PRESSED INSIDE
00001214                           465  ;                            - C (BIT 2) - 1=MOUSE CLICKED INSIDE
00001214                           466  ;                                          0=MOUSE NOT CLICKED INSIDE
00001214                           467  ;                            NOTE THAT IF I=0 THEN P=C=0, IF I=1 AND P=0
00001214                           468  ;                            THEN C=0.
00001214                           469  ; =============================================================================
00001214                           470  
00001214                           471  ; -----------------------------------------------------------------------------
00001214                           472  BTNINIT
00001214                           473  ; INITIALIZES THE BUTTON BY:
00001214                           474  ;  * COPYING THE SDB POINTER INTO THE VDB.
00001214                           475  ;  * CLEARING THE STATUS BYTE.
00001214                           476  ; INPUT    : A0 - POINTER TO THE VARIABLE DATABLOCK
00001214                           477  ;            A1 - POINTER TO THE STATIC DATABLOCK
00001214                           478  ; OUTPUT   : NONE
00001214                           479  ; MODIFIES : NONE
00001214                           480  ; -----------------------------------------------------------------------------
00001214                           481  
00001214                           482  ; TODO : PLACE YOUR CODE HERE  
00001214                           483  
00001214                           484              ;Copiamos SDB (A1) en el contenido de VDB ((A0))         
00001214  2089                     485              MOVE.L A1,(A0)
00001216                           486              
00001216                           487              ;Limpiamos el B status
00001216  4228 0004                488              CLR.B 4(A0) 
0000121A                           489             
0000121A  4E75                     490              RTS
0000121C                           491  ; -----------------------------------------------------------------------------
0000121C                           492  BTNUPD
0000121C                           493  ; UPDATES THE BUTTON VDB AND EXECUTES THE CALLBACK IF REQUIRED
0000121C                           494  ; INPUT    : A0 - POINTER TO THE VARIABLE DATABLOCK
0000121C                           495  ; OUTPUT   : NONE
0000121C                           496  ; MODIFIES : NONE
0000121C                           497  ; -----------------------------------------------------------------------------
0000121C                           498  
0000121C                           499  ; TODO : PLACE YOUR CODE HERE
0000121C                           500      
0000121C                           501              ;Guardamos registros     
0000121C  48E7 F8F0                502              MOVEM.L A0-A3/D0-D4, -(A7)
00001220                           503  
00001220                           504              ;Movemos el contenido de VDB en A1
00001220  2450                     505              MOVE.L (A0),A2
00001222                           506  
00001222                           507              ;Sumamos 4 a A0 para acceder a los bits I,P,C 
00001222  5888                     508              ADDQ.L #4,A0
00001224                           509  
00001224                           510              ;Ponemos I,P,C de A0 en 0
00001224  0210 00F8                511              ANDI.B #%11111000,(A0)
00001228                           512  
00001228                           513              ;Movemos las coordenadas MOUY en D2,
00001228                           514              ;y YTOP en D1
00001228  3239 00001B0C            515              MOVE.W (MOUY),D1
0000122E  3412                     516              MOVE.W (A2),D2
00001230                           517  
00001230                           518              ;Movemos la altura del botón en D3
00001230  362A 0004                519              MOVE.W 4(A2),D3
00001234                           520  
00001234                           521              ;Restamos la posición Y del ratón con la coordenada
00001234                           522              ;Y superior, y comprobamos que sea menor que su altura
00001234  9242                     523              SUB.W D2,D1
00001236  B641                     524              CMP.W D1,D3
00001238                           525              
00001238                           526              ;Saltamos si MOUY es mayor
00001238  6C00 0008                527              BGE MAYORY
0000123C                           528              
0000123C                           529              ;Saltamos si MOUY es menor
0000123C  4EF9 000012B4            530              JMP FINAL
00001242                           531              
00001242                           532  
00001242                           533  MAYORY:
00001242                           534              ;Comprobamos que la coordenada del botón sea >0
00001242  B27C 0000                535              CMP #0,D1
00001246                           536              
00001246                           537              ;Saltamos en DENTROY si MOUY es mayor
00001246  6C00 0008                538              BGE DENTROY
0000124A                           539              
0000124A  4EF9 000012B4            540              JMP FINAL
00001250                           541  
00001250                           542  
00001250                           543  DENTROY:
00001250                           544  
00001250                           545              ;Si entramos aqui es porqué el ratón se encuentra
00001250                           546              ;dentro de las coordenadas Y del botón
00001250                           547              ;Ahora miraremos que esté dentro de X
00001250                           548      
00001250                           549              ;Movemos MOUX a D1, y XLEFT a D2
00001250  3239 00001B0E            550              MOVE.W (MOUX),D1
00001256  342A 0002                551              MOVE.W 2(A2),D2
0000125A                           552  
0000125A                           553              ;El proceso que usaremos es el mismo que para la Y
0000125A  362A 0006                554              MOVE.W 6(A2),D3
0000125E                           555  
0000125E                           556              ;XLEFT - MOUX, y comprobar que sea mayor a la anchura
0000125E  9242                     557              SUB.W D2,D1
00001260  B641                     558              CMP.W D1,D3
00001262                           559      
00001262  6C00 0008                560              BGE  MAYORX 
00001266                           561          
00001266  4EF9 000012B4            562              JMP FINAL
0000126C                           563  
0000126C                           564  
0000126C                           565  MAYORX:
0000126C                           566              ;Comprobamos que la coordenada del botón sea >0
0000126C  B27C 0000                567              CMP #0,D1
00001270                           568              
00001270  6C00 0008                569              BGE I
00001274                           570              
00001274  4EF9 000012B4            571              JMP FINAL
0000127A                           572  
0000127A                           573  
0000127A                           574  I:
0000127A                           575              ;Si entramos en aquí significa que el ratón se encontraba
0000127A                           576              ;dentro de un botón
0000127A                           577              
0000127A                           578              ;Ponemos el bit I de A0 en 1
0000127A  0010 0001                579              ORI.B #%00000001,(A0)
0000127E                           580  
0000127E  1839 00001B10            581              MOVE.B (MOUVAL),D4
00001284                           582              
00001284                           583              ;Comparamos si el ratón se está pulsando(P=1)
00001284  0804 0000                584              BTST.L #0,D4
00001288                           585              
00001288                           586              ;Saltamos si el bit P estaba en 1
00001288  6600 0008                587              BNE P
0000128C                           588  
0000128C  4EF9 000012B4            589              JMP FINAL
00001292                           590  
00001292                           591  
00001292                           592  P: 
00001292                           593              ;Ponemos el bit P en 1 porque el click derecho se ha pulsado
00001292  0010 0002                594              ORI.B #%0000010,(A0)
00001296                           595              
00001296                           596              ;Miramos mediante el bit menos significativo de MOUEDGE 
00001296                           597              ;si el ratón ha sido pulsado
00001296  1839 00001B11            598              MOVE.B (MOUEDGE),D4
0000129C  0804 0000                599              BTST.L #0,D4
000012A0                           600  
000012A0                           601              ;Saltamos si C=1
000012A0  6600 0008                602              BNE C
000012A4                           603  
000012A4  4EF9 000012B4            604              JMP FINAL
000012AA                           605  
000012AA                           606  
000012AA                           607  C:
000012AA                           608              ;Ponemos C en 1
000012AA  0010 0004                609              ORI.B #%00000100,(A0)
000012AE  266A 0008                610              MOVE.L 8(A2),A3
000012B2                           611  
000012B2                           612              ;Realizamos el callback para el sonido
000012B2  4E93                     613              JSR  (A3)
000012B4                           614  
000012B4                           615  
000012B4                           616  FINAL:
000012B4                           617  
000012B4  4CDF 0F1F                618              MOVEM.L (A7)+,A0-A3/D0-D4
000012B8  4E75                     619              RTS
000012BA                           620  
000012BA                           621  
000012BA                           622  
000012BA                           623  
000012BA                           624  
000012BA                           625  
000012BA                           626  
000012BA                           627  ; -----------------------------------------------------------------------------
000012BA                           628  BTNPLOT
000012BA                           629  ; PLOTS THE BUTTON. A RECTANGLE IS DRAWN WITH THICKNESS BTNPENWD. THE CONTOUR
000012BA                           630  ; COLOR IS BTNPENCL. THE FILL COLOR IS BLACK IF THE MOUSE IS NOT INSIDE,
000012BA                           631  ; BTNSELCL IF THE MOUSE IS INSIDE BUT THE MOUSE BUTTON IS NOT PRESSED AND
000012BA                           632  ; BTNPRSCL IF THE MOUSE BUTTON IS PRESSED INSIDE.
000012BA                           633  ; INPUT    : A0 - POINTER TO THE VARIABLE DATABLOCK
000012BA                           634  ; OUTPUT   : NONE
000012BA                           635  ; MODIFIES : NONE
000012BA                           636  ; -----------------------------------------------------------------------------
000012BA                           637  
000012BA                           638  ; TODO : PLACE YOUR CODE HERE
000012BA                           639  
000012BA                           640              ;Guardamos registros
000012BA  48E7 FFC0                641              MOVEM.L D0-D7/A0-A1,-(A7)
000012BE                           642          
000012BE                           643              ;Usamos el trap #15 para la anchura del contorno
000012BE  103C 005D                644              MOVE.B #93,D0
000012C2  123C 0004                645              MOVE.B #BTNPENWD,D1
000012C6  4E4F                     646              TRAP #15
000012C8                           647          
000012C8                           648              ;Usamos el trap #15 para el color del contorno
000012C8  103C 0050                649              MOVE.B #80,D0
000012CC  223C 00005500            650              MOVE.L #BTNPENCL,D1
000012D2  4E4F                     651              TRAP #15
000012D4                           652          
000012D4                           653              ;Miramos si el ratón está dentro del botón, mediante el bit 
000012D4                           654              ;menos significativo de VDB
000012D4  1628 0004                655              MOVE.B 4(A0),D3
000012D8  0803 0000                656              BTST.L #0,D3
000012DC                           657              
000012DC                           658              ;Si el bit vale 1 significa que está dentro
000012DC  6600 0008                659              BNE DENTRO
000012E0                           660          
000012E0  4EF9 00001312            661              JMP FUERA
000012E6                           662  
000012E6                           663  
000012E6                           664  DENTRO: 
000012E6                           665              ;Miramos si el ratón se está pulsando dentro de un botón
000012E6                           666              ;mediante el bit P
000012E6  0803 0001                667              BTST.L #1,D3
000012EA                           668              
000012EA                           669              ;Saltamos si está pulsado
000012EA  6600 0014                670              BNE PULSADO
000012EE                           671              
000012EE                           672              ;Si no està pulsado usamos la tarea 81 del trap #15 para
000012EE                           673              ;asignarle color correspondiente 
000012EE  103C 0051                674              MOVE.B #81,D0
000012F2  223C 0000AA00            675              MOVE.L #BTNSELCL,D1
000012F8  4E4F                     676              TRAP #15
000012FA                           677          
000012FA  4EF9 0000131A            678              JMP FINAL1
00001300                           679              
00001300                           680  
00001300                           681  PULSADO:    
00001300                           682              ;Usamos la tarea 81 del trap #15 para asignarle el color 
00001300                           683              ;correspondiente al botón, para cuando se pulsa
00001300  103C 0051                684              MOVE.B #81,D0
00001304  223C 00006600            685              MOVE.L #BTNPRSCL,D1
0000130A  4E4F                     686              TRAP #15
0000130C                           687           
0000130C  4EF9 0000131A            688              JMP FINAL1
00001312                           689           
00001312                           690  FUERA:      
00001312                           691              ;Usamos la tarea 81 del trap #15 para asignarle el color 
00001312                           692              ;correspondiente al botón, para cuando el ratón se encuentra
00001312                           693              ;fuera del botón 
00001312  103C 0051                694              MOVE.B #81,D0
00001316  7200                     695              MOVE.L #0,D1
00001318  4E4F                     696              TRAP #15
0000131A                           697  
0000131A                           698  
0000131A                           699  FINAL1:     
0000131A  2250                     700              MOVE.L (A0),A1
0000131C                           701           
0000131C                           702              ;Usamos la tarea 87 del trap #15 para dibujar el rectangulo
0000131C                           703              ;con sus coordenadas correspondientes
0000131C  103C 0057                704              MOVE.B #87,D0
00001320  3229 0002                705              MOVE.W 2(A1),D1
00001324  3411                     706              MOVE.W (A1),D2
00001326  3601                     707              MOVE.W D1,D3
00001328  D669 0006                708              ADD.W 6(A1),D3
0000132C  3802                     709              MOVE.W D2,D4
0000132E  D869 0004                710              ADD.W 4(A1),D4
00001332  4E4F                     711              TRAP #15
00001334                           712           
00001334                           713              ;Usamos la tarea 95 del trap #15 para escribir el texto 
00001334                           714              ;correcto en el rectangulo
00001334  103C 005F                715              MOVE.B #95,D0
00001338  3229 0002                716              MOVE.W 2(A1),D1
0000133C  0641 0028                717              ADD.W #40,D1
00001340                           718           
00001340  3411                     719              MOVE.W (A1),D2
00001342  0642 000F                720              ADD.W #15,D2
00001346                           721           
00001346  D2FC 000C                722              ADD.W #12,A1
0000134A                           723           
0000134A  4E4F                     724              TRAP #15
0000134C                           725           
0000134C  4CDF 03FF                726              MOVEM.L (A7)+,D0-D7/A0-A1
00001350  4E75                     727              RTS
00001352                           728  
00001352                           729          
00001352                           730  
00001352                           731  
00001352                           732  
00001352                           733  
00001352                           734  
00001352                           735  
00001352                           736  
00001352                           737  
00001352                           738  
00001352                           739  
00001352                           740  
00001352                           741  
00001352                           742  
00001352                           743  
00001352                           744  
00001352                           745  
00001352                           746  
00001352                           747  
00001352                           748  
00001352                           749  
00001352                           750  
00001352                           751  
00001352                           752  
00001352                           753  
00001352                           754  -------------------- end include --------------------
00001352                           755              INCLUDE "BTNLIST.X68"           ; BUTTON LIST MANAGEMENT
00001352                           756  ; =============================================================================
00001352                           757  ; TITLE    : BUTTON LIST MANAGEMENT
00001352                           758  ; AUTHOR   : ANTONI BURGUERA
00001352                           759  ; HISTORY  : 05-JULY-2021 - CREATION
00001352                           760  ; COMMENTS : * ALLOWS ADDING, UPDATING AND PLOTTING A LIST OF BUTTONS. ALLOWS
00001352                           761  ;              REMOVING THEM ALL, BUT NOT INDIVIDUALLY.
00001352                           762  ;
00001352                           763  ;            * THE LIST OF BUTTONS IS STORED AS A LIST OF BUTTON'S VDB. THIS
00001352                           764  ;              LIST IS STORED AT BTLDATA.
00001352                           765  ;
00001352                           766  ;            * THE LIST OF VBD IS BUILT ASSUMING A MAXIMUM OF BTLMXVDB BUTTONS
00001352                           767  ;              AND A SIZE OF BTNSZVDB BYTES FOR EACH VDB.
00001352                           768  ; =============================================================================
00001352                           769  
00001352                           770  ; -----------------------------------------------------------------------------
00001352                           771  BTLINIT
00001352                           772  ; INITIALIZES BUTTON LIST BY SETTING ALL THE POINTERS TO STATIC DATA BLOCKS
00001352                           773  ; TO $FFFFFFFF.
00001352                           774  ; INPUT    : NONE
00001352                           775  ; OUTPUT   : NONE
00001352                           776  ; MODIFIES : NONE
00001352                           777  ; -----------------------------------------------------------------------------
00001352  48E7 8080                778              MOVEM.L D0/A0,-(A7)
00001356  41F9 00001B14            779              LEA     BTLDATA,A0
0000135C  303C 0009                780              MOVE.W  #BTLMXVDB-1,D0          ; NUM ITERATIONS
00001360  20BC FFFFFFFF            781  .LOOP       MOVE.L  #$FFFFFFFF,(A0)         ; MARK SLOT AS EMPTY
00001366  5C88                     782              ADD.L   #BTNSZVDB,A0            ; GO TO NEXT SLOT
00001368  51C8 FFF6                783              DBRA.W  D0,.LOOP                ; LOOP FOR ALL SLOTS
0000136C  4CDF 0101                784              MOVEM.L (A7)+,D0/A0
00001370  4E75                     785              RTS
00001372                           786  
00001372                           787  ; -----------------------------------------------------------------------------
00001372  =00001352                788  BTLCLEAR    EQU     BTLINIT
00001372                           789  ; CLEARS THE BUTTON LIST. SAME AS BTLINIT.
00001372                           790  ; INPUT    : NONE
00001372                           791  ; OUTPUT   : NONE
00001372                           792  ; MODIFIES : NONE
00001372                           793  ; -----------------------------------------------------------------------------
00001372                           794  
00001372                           795  ; -----------------------------------------------------------------------------
00001372                           796  BTLADD
00001372                           797  ; ADDS A NEW BUTTON INTO THE BUTTON LIST AND INITS IT.
00001372                           798  ; INPUT    : A1 - POINTER TO THE BUTTON SDB
00001372                           799  ; OUTPUT   : NONE
00001372                           800  ; MODIFIES : NONE
00001372                           801  ; -----------------------------------------------------------------------------
00001372  48E7 8080                802              MOVEM.L A0/D0,-(A7)
00001376                           803  
00001376                           804              ; SEARCH FOR AN EMPTY SLOT
00001376                           805  
00001376  41F9 00001B14            806              LEA     BTLDATA,A0
0000137C  303C 0009                807              MOVE.W  #BTLMXVDB-1,D0
00001380  0C90 FFFFFFFF            808  .LOOP       CMP.L   #$FFFFFFFF,(A0)
00001386  6700 000E                809              BEQ     .FOUND
0000138A  5C88                     810              ADD.L   #BTNSZVDB,A0
0000138C  51C8 FFF2                811              DBRA.W  D0,.LOOP
00001390                           812  
00001390                           813              ; NO SLOT? DO NOTHING
00001390                           814  
00001390  4CDF 0101                815  .END        MOVEM.L (A7)+,A0/D0
00001394  4E75                     816              RTS
00001396                           817  
00001396                           818              ; SLOT FOUND? PLACE THE BUTTON THERE BY CALLING BTNINIT
00001396                           819  
00001396  4EB8 1214                820  .FOUND      JSR     BTNINIT
0000139A  60F4                     821              BRA     .END
0000139C                           822  
0000139C                           823  ; -----------------------------------------------------------------------------
0000139C                           824  BTLUPD
0000139C                           825  ; CALLS BTNUPD FOR ALL THE BUTTONS IN THE BUTTON LIST.
0000139C                           826  ; INPUT    : NONE
0000139C                           827  ; OUTPUT   : NONE
0000139C                           828  ; MODIFIES : NONE
0000139C                           829  ; -----------------------------------------------------------------------------
0000139C                           830  
0000139C  48E7 8080                831              MOVEM.L A0/D0,-(A7)
000013A0                           832  
000013A0                           833              ; TRAVERSE THE LIST
000013A0                           834  
000013A0  41F9 00001B14            835              LEA     BTLDATA,A0
000013A6  303C 0009                836              MOVE.W  #BTLMXVDB-1,D0
000013AA  0C90 FFFFFFFF            837  .LOOP       CMP.L   #$FFFFFFFF,(A0)
000013B0  6700 000C                838              BEQ     .DONE
000013B4                           839  
000013B4                           840              ; UPDATE EACH BUTTON
000013B4                           841  
000013B4  4EB8 121C                842              JSR     BTNUPD
000013B8                           843  
000013B8                           844              ; GO TO THE NEXT BUTTON
000013B8                           845  
000013B8  5C88                     846              ADD.L   #BTNSZVDB,A0
000013BA  51C8 FFEE                847              DBRA.W  D0,.LOOP
000013BE                           848  
000013BE  4CDF 0101                849  .DONE       MOVEM.L (A7)+,A0/D0
000013C2  4E75                     850              RTS
000013C4                           851  
000013C4                           852  
000013C4                           853  ; -----------------------------------------------------------------------------
000013C4                           854  BTLPLOT
000013C4                           855  ; CALLS BTNPLOT FOR ALL THE BUTTONS IN THE BUTTON LIST.
000013C4                           856  ; INPUT    : NONE
000013C4                           857  ; OUTPUT   : NONE
000013C4                           858  ; MODIFIES : NONE
000013C4                           859  ; -----------------------------------------------------------------------------
000013C4                           860  
000013C4                           861  ; TODO : PLACE YOUR CODE HERE
000013C4  48E7 8080                862              MOVEM.L A0/D0,-(A7)
000013C8                           863  
000013C8                           864              ;Recorremos la lista
000013C8  41F9 00001B14            865              LEA     BTLDATA,A0
000013CE  303C 0009                866              MOVE.W  #BTLMXVDB-1,D0
000013D2  0C90 FFFFFFFF            867  .LOOP       CMP.L   #$FFFFFFFF,(A0)
000013D8  6700 000C                868              BEQ     .FIN
000013DC                           869  
000013DC                           870              ;Actualizamos el botón
000013DC  4EB8 12BA                871              JSR     BTNPLOT
000013E0                           872  
000013E0                           873              ;Siguiente botón
000013E0  5C88                     874              ADD.L   #BTNSZVDB,A0
000013E2                           875              
000013E2                           876              ;Volvemos al bucle para los otros botones
000013E2  51C8 FFEE                877              DBRA  D0,.LOOP
000013E6                           878  
000013E6  4CDF 0101                879  .FIN        MOVEM.L (A7)+,A0/D0
000013EA  4E75                     880              RTS
000013EC                           881  
000013EC                           882  
000013EC                           883  
000013EC                           884  
000013EC                           885  
000013EC                           886  
000013EC                           887  
000013EC                           888  
000013EC                           889  
000013EC                           890  
000013EC                           891  
000013EC                           892  
000013EC                           893  
000013EC                           894  -------------------- end include --------------------
000013EC                           895              INCLUDE "GRID.X68"              ; GRID MANAGEMENT
000013EC                           896   ; =============================================================================
000013EC                           897  ; TITLE    : GRID MANAGEMENT
000013EC                           898  ; AUTHOR   : ANTONI BURGUERA
000013EC                           899  ; HISTORY  : 05-JULY-2021 - CREATION
000013EC                           900  ; COMMENTS : * THERE ARE TWO MATRICES (GRDMATR0 AND GRDMATR1) AND TWO POINTERS
000013EC                           901  ;              TO THESE MATRICES (GRDSRC AND GRDDST).
000013EC                           902  ;
000013EC                           903  ;            * THE MATRIX TO BE PLOTTED IS ALWAYS THE ONE POINTED BY GRDDST.
000013EC                           904  ;
000013EC                           905  ;            * THE MATRIX TO BE UPDATED BY THE MOUSE (GRDMUPD) IS ALWAYS THE
000013EC                           906  ;              ONE POINTED BY GRDDST.
000013EC                           907  ;
000013EC                           908  ;            * THE RULES-UPDATE (GRDRUPD) SWITCHES THE POINTERS AND THEN READS
000013EC                           909  ;              THE NEW SOURCE MATRIX (GRDSRC) TO DETERMINE THE NUMBER OF
000013EC                           910  ;              NEIGHBORS. THE RESULTING CELL VALUE IS WRITTEN TO THE DESTINA-
000013EC                           911  ;              TION MATRIX, POINTED BY GRDDST.
000013EC                           912  ; =============================================================================
000013EC                           913  
000013EC                           914  ; -----------------------------------------------------------------------------
000013EC                           915  GRDINIT
000013EC                           916  ; INITIALIZE THE GRID AS FOLLOWS:
000013EC                           917  ; * POINTS THE SOURCE GRID POINTER TO GRDMATR0.
000013EC                           918  ; * POINTS THE DESTINATION GRID POINTER TO GRDMATR1.
000013EC                           919  ; * RESETS THE COUNTERS (GRDNPLR1, GRDNPLR2, GRDNGEN).
000013EC                           920  ; * FILLS THE TWO MATRICES (GRDMATR0 AND GRDMATR1) WITH ZEROS.
000013EC                           921  ; INPUT    : NONE
000013EC                           922  ; OUTPUT   : NONE
000013EC                           923  ; MODIFIES : NONE
000013EC                           924  ; -----------------------------------------------------------------------------
000013EC                           925  ;Inicia la matriz
000013EC  48E7 8080                926              MOVEM.L A0/D0,-(A7)
000013F0  23FC 00001B58 00001B50   927              MOVE.L  #GRDMATR0,(GRDSRC)
000013FA  23FC 00002358 00001B54   928              MOVE.L  #GRDMATR1,(GRDDST)
00001404  4279 00002B58            929              CLR.W   (GRDNPLR1)
0000140A  4279 00002B5A            930              CLR.W   (GRDNPLR2)
00001410  4279 00002B5C            931              CLR.W   (GRDNGEN)
00001416  41F9 00001B58            932              LEA     GRDMATR0,A0
0000141C  303C 0FFF                933              MOVE.W  #GRDWIDTH*GRDHEIGH*2-1,D0
00001420  4218                     934  .LOOP       CLR.B   (A0)+
00001422  51C8 FFFC                935              DBRA.W  D0,.LOOP
00001426  4CDF 0101                936              MOVEM.L (A7)+,A0/D0
0000142A  4E75                     937              RTS
0000142C                           938  
0000142C                           939  ; -----------------------------------------------------------------------------
0000142C                           940  GRDMUPD
0000142C                           941  ; GRID UPDATE USING MOUSE. THE INTERFACE IS AS FOLLOWS:
0000142C                           942  ; * IF MOUSE IS NOT PRESSED OR IS OUTSIDE THE PLOTTED GRID, DOES NOTHING.
0000142C                           943  ; * IF LEFT MOUSE BUTTON IS PRESSED INSIDE THE GRID:
0000142C                           944  ;   - A PLAYER 1 (VALUE=1) CELL IS CREATED AT THE MOUSE POSITION IF THE MOUSE
0000142C                           945  ;     IS ON THE LEFT HALF OF THE GRID.
0000142C                           946  ;   - A PLAYER 2 (VALUE=2) CELL IS CREATED AT THE MOUSE POSITION IF THE MOUSE
0000142C                           947  ;     IS ON THE RIGHT HALF OF THE GRID.
0000142C                           948  ; * IF RIGHT MOUSE BUTTON IS PRESSED INSIDE THE GRID, THE CELL WHERE THE MOUSE
0000142C                           949  ;   IS IS CLEARED (VALUE=0).
0000142C                           950  ; INPUT    : NONE
0000142C                           951  ; OUTPUT   : NONE
0000142C                           952  ; MODIFIES : NONE
0000142C                           953  ; -----------------------------------------------------------------------------
0000142C                           954  
0000142C                           955  ; TODO : PLACE YOUR CODE HERE
0000142C                           956  ;D0:X ->COLUMNA , D1:Y->FILA , D2:MOUVAL, D3:NUM CASILLA
0000142C  48E7 F880                957              MOVEM.L D0-D4/A0,-(A7)
00001430  4280                     958              CLR.L D0
00001432  4282                     959              CLR.L D2
00001434  4281                     960              CLR.L D1
00001436                           961  ;COMPROBAMOS SI SE HA PULSADO EL MOUSE
00001436  1639 00001B10            962              MOVE.B (MOUVAL),D3
0000143C  B63C 0000                963              CMP.B #0,D3
00001440  6700 008C                964              BEQ .FINAL
00001444                           965   ;COMPROBAMOS SI EL MOUSE ESTA DENTRO DE LA MATRIZ          
00001444  3239 00001B0E            966              MOVE.W (MOUX),D1
0000144A  B27C 0010                967              CMP.W #GRDXOFF,D1 ;SI ESTA EN LAS X
0000144E  6F00 007E                968              BLE .FINAL
00001452  0441 0010                969              SUB.W #GRDXOFF,D1 ;POSICION RELATIVA A LA MATRIZ(X)
00001456  B27C 0300                970              CMP.W #GRDPXWID,D1
0000145A  6C00 0072                971              BGE .FINAL
0000145E                           972             
0000145E  3439 00001B0C            973              MOVE.W (MOUY),D2   
00001464  B47C 009E                974              CMP.W #GRDYOFF,D2  
00001468  6F00 0064                975              BLE .FINAL
0000146C  0442 009E                976              SUB.W #GRDYOFF,D2  ;POSICION RELATIVA A LA MATRIZ (Y)
00001470  B47C 0180                977              CMP.W #GRDPXHEI,D2
00001474  6C00 0058                978              BGE .FINAL
00001478                           979              
00001478                           980             
00001478  83FC 000C                981              DIVS.W #GRDSZCEL,D1
0000147C  85FC 000C                982              DIVS.W #GRDSZCEL,D2
00001480  41F9 00001B54            983              LEA GRDDST,A0
00001486  3002                     984              MOVE.W D2,D0
00001488  C1FC 0040                985              MULS.W #GRDWIDTH,D0
0000148C  D041                     986              ADD.W D1,D0
0000148E  C63C 0001                987              AND.B #MOUMSKLF,D3
00001492  6700 0036                988              BEQ .R_GRID
00001496  1801                     989              MOVE.B D1,D4
00001498  89FC 0020                990              DIVS.W #GRDWIDTH/2,D4
0000149C  5204                     991              ADDQ.B #1,D4
0000149E  1184 0000                992              MOVE.B D4,(A0,D0)
000014A2                           993          
000014A2  B83C 0001                994              CMP.B #1,D4 ;LADO IZQUIERDO
000014A6  6600 000E                995              BNE .P2
000014AA  5279 00002B58            996              ADD.W #1,(GRDNPLR1) ;MARCADOR P3
000014B0  4EF9 000014CE            997              JMP .FINAL
000014B6                           998  .P2         
000014B6  B83C 0002                999              CMP.B #2,D4 ;LADO DERECHO
000014BA  6600 0012               1000              BNE .FINAL
000014BE  5279 00002B5A           1001              ADD.W #1,(GRDNPLR2) ;MARCADOR P2
000014C4  4EF9 000014CE           1002              JMP .FINAL
000014CA                          1003  
000014CA                          1004  ;BOTON DERECHO EN LA CASILLA           
000014CA  4230 0000               1005  .R_GRID:    CLR.B (A0,D0)
000014CE                          1006  
000014CE  4CDF 011F               1007  .FINAL:   MOVEM.L (A7)+,D0-D4/A0
000014D2  4E75                    1008            RTS
000014D4                          1009  ; -----------------------------------------------------------------------------
000014D4                          1010  GRDRUPD
000014D4                          1011  ; UPDATES THE GRID ACCORDING TO 2-PLAYER GAME OF LIFE RULES AS FOLLOWS:
000014D4                          1012  ; * ADDS 1 TO THE NUMBER OF GENERATIONS (GRDNGEN)
000014D4                          1013  ; * SWITCHES THE MATRIX POINTERS (GRDDST AND GRDSRC).
000014D4                          1014  ; * CHECKS THE NEIGHBORS USING THE NEW SOURCE MATRIX (POINTER BY GRDDRC)
000014D4                          1015  ; * THE RESULTS OF APPLYING THE RULES ARE WRITTEN INTO THE NEW DESTINATION
000014D4                          1016  ;   MATRIX (POINTED BY GRDDST).
000014D4                          1017  ; * THE RULES ARE THE FOLLOWING, WHERE P1 AND P2 ARE 1 AND 2 RESPECTIVELY,
000014D4                          1018  ;   DEAD CELLS ARE REPRESENTED BY 0 AND NP1 AND NP2 DENOTE THE NUMBER OF
000014D4                          1019  ;   PLAYER 1 AND PLAYER 2 NEIGHBORS RESPECTIVELY:
000014D4                          1020  ;   + SURVIVAL RULES
000014D4                          1021  ;     - IF CELL IS P1 AND NP1-NP2 IS 2 OR 3 -> NEW VALUE IS P1
000014D4                          1022  ;     - IF CELL IS P1 AND NP1-NP2 IS 1 AND NP1>=2 -> NEW VALUE IS P1
000014D4                          1023  ;     - OTHERWISE -> NEW VALUE IS 0
000014D4                          1024  ;     - IF CELL IS P2 AND NP2-NP1 IS 2 OR 3 -> NEW VALUE IS P2
000014D4                          1025  ;     - IF CELL IS P2 AND NP2-NP1 IS 1 AND NP2>=2 -> NEW VALUE IS P2
000014D4                          1026  ;     - OTHERWISE -> NEW VALUE IS 0
000014D4                          1027  ;   + BIRTH RULES
000014D4                          1028  ;     - THE CELL HAS EXACTLY THREE P1 NEIGHBOURS AND THE NUMBER
000014D4                          1029  ;       OF P2 NEIGHBOURS IS DIFFERENT FROM THREE. IN THIS CASE A
000014D4                          1030  ;       P1 TOKEN IS BORN IN THE CELL.
000014D4                          1031  ;     - THE CELL HAS EXACTLY THREE P2 NEIGHBOURS AND THE NUMBER
000014D4                          1032  ;       OF P1 NEIGHBOURS IS DIFFERENT FROM THREE. IN THIS CASE A
000014D4                          1033  ;       P2 TOKEN IS BORN IN THE CELL.
000014D4                          1034  ;     - THE CELL HAS EXACTLY THREE WHITE AND THREE BLACK NEIGHBOURS.
000014D4                          1035  ;       IN THIS CASE AN UNBIASED COIN DETERMINES WHETHER A WHITE OR
000014D4                          1036  ;       BLACK TOKEN IS BORN IN THE CELL.
000014D4                          1037  ; INPUT    : NONE
000014D4                          1038  ; OUTPUT   : NONE
000014D4                          1039  ; MODIFIES : NONE
000014D4                          1040  ; -----------------------------------------------------------------------------
000014D4                          1041  
000014D4                          1042  ; TODO : PLACE YOUR CODE HERE
000014D4                          1043  ;D0:COLUMNA VECINO, D1:CONTADOR ITERACION, D2:CELL VALUE, D3:NP1 ,D4:NP2, D5:FILA VECINA, 
000014D4                          1044  ;D6:AUXILIAR PARA MOVIMIENTOS, D7:NUM CASILLAS
000014D4  48E7 FF80               1045          MOVEM.L D0-D7/A0,-(A7)
000014D8                          1046          
000014D8  5279 00002B5C           1047          ADDQ.W #1,(GRDNGEN)
000014DE  227C 00001B54           1048          MOVE.L #GRDDST,A1
000014E4  23FC 00001B50 00001B54  1049          MOVE.L #GRDSRC,(GRDDST)
000014EE  23C9 00001B50           1050          MOVE.L A1,(GRDSRC)
000014F4                          1051          
000014F4  207C 00001B50           1052          MOVE.L #GRDSRC,A0
000014FA                          1053          
000014FA  4241                    1054          CLR D1
000014FC  323C FFFF               1055          MOVE.W #$FFFFFFFF,D1
00001500                          1056          
00001500  3C3C 0040               1057          MOVE.W #GRDWIDTH,D6
00001504  CCFC 0020               1058          MULU #GRDHEIGH,D6
00001508  5346                    1059          SUB.W #1,D6
0000150A                          1060          
0000150A                          1061  .BUCLE:
0000150A                          1062        
0000150A                          1063  
0000150A                          1064  .FINAL:
0000150A  4CDF 01FF               1065          MOVEM.L (A7)+,D0-D7/A0
0000150E  4E75                    1066          RTS
00001510                          1067          
00001510  =0000003F               1068  NOT_32   EQU %0111111
00001510  =0000007F               1069  NOT_64   EQU %01111111 ;PARA HACER EL MODULO DE 64
00001510  =000007FF               1070  NOT_2048 EQU %011111111111 ;PARA HACER EL MODULO DE 2048
00001510                          1071  
00001510                          1072  ; -----------------------------------------------------------------------------
00001510                          1073  GRDSAVE
00001510                          1074  ; SAVES THE GRID INTO A FILE IN CSV FORMAT
00001510                          1075  ; INPUT    : NONE
00001510                          1076  ; OUTPUT   : NONE
00001510                          1077  ; MODIFIES : NONE
00001510                          1078  ; NOTE     : THE LOCAL BUFFER SIZE MUST BE MAX(512,2*GRDWIDTH+1). PLEASE CHANGE
00001510                          1079  ;            IT ACCORDINGLY IF GRDWIDTH*2+1 IS LARGER THAN 512.
00001510                          1080  ; -----------------------------------------------------------------------------
00001510  48E7 FFFE               1081              MOVEM.L D0-D7/A0-A6,-(A7)       ; TO BE OPTIMIZED
00001514  103C 0032               1082              MOVE.B  #50,D0                  ; CLOSE ALL FILES (RECOMMENDED)
00001518  4E4F                    1083              TRAP    #15
0000151A  9FFC 00000200           1084              SUB.L   #512,A7                 ; ROW BUFFER IN LOCAL MEMORY
00001520  103C 003A               1085              MOVE.B  #58,D0                  ; SHOW FILE DIALOG TASK
00001524  7201                    1086              MOVE.L  #1,D1                   ; DISPLAY SAVE DIALOG
00001526  43F9 0000159C           1087              LEA     .MSG,A1                 ; STANDARD MESSAGE
0000152C  45F9 000015B6           1088              LEA     .FILTER,A2              ; NO FILTER
00001532  264F                    1089              MOVE.L  A7,A3                   ; FILE NAME BUFFER
00001534  4253                    1090              CLR.W   (A3)                    ; ENSURE THERE IS NO STRING
00001536  4E4F                    1091              TRAP    #15
00001538  4A01                    1092              TST.B   D1
0000153A  6700 0054               1093              BEQ     .END                    ; IF CANCELLED, DO NOTHING
0000153E  224B                    1094              MOVE.L  A3,A1                   ; PLACE THE FILENAME INTO A1
00001540  103C 0034               1095              MOVE.B  #52,D0                  ; CREATE NEW FILE
00001544  4E4F                    1096              TRAP    #15
00001546  4A40                    1097              TST.W   D0                      ; CHECK CREATION ERROR
00001548  6600 0046               1098              BNE     .END                    ; DO NOTHING MORE IF ERROR
0000154C  2C4F                    1099              MOVE.L  A7,A6                   ; PUT A6 INTO START OF BUFFER
0000154E  224F                    1100              MOVE.L  A7,A1                   ; PUT A1 INTO START OF BUFFER
00001550  41F9 00001B54           1101              LEA GRDDST, A0                  ; A0: POINTER TO THE DATA TO WRITE
00001556  363C 001F               1102              MOVE.W  #GRDHEIGH-1,D3          ; D3: NUMBER OF ROWS - 1
0000155A  343C 003F               1103  .LOOPY      MOVE.W  #GRDWIDTH-1,D2          ; D2: NUMBER OF COLUMNS - 1
0000155E  103C 0030               1104  .LOOP       MOVE.B  #'0',D0                 ; ADD CHAR '0' AND THE CELL VALUE
00001562  D018                    1105              ADD.B   (A0)+,D0
00001564  1CC0                    1106              MOVE.B  D0, (A6)+               ; STORE IT IN THE BUFFER
00001566  1CFC 002C               1107              MOVE.B  #',',(A6)+              ; NOW PUT THE COMMA
0000156A  51CA FFF2               1108              DBRA.W  D2,.LOOP
0000156E  1D7C 000D FFFF          1109              MOVE.B  #$0D,-1(A6)             ; STORE CARRIAGE RETURN (REMOVE ',')
00001574  1CBC 000A               1110              MOVE.B  #$0A,(A6)               ; STORE LINE FEED
00001578  103C 0036               1111              MOVE.B  #54,D0                  ; WRITE TO FILE TASK NUMBER
0000157C  243C 00000081           1112              MOVE.L  #GRDWIDTH*2+1,D2        ; NUMBER OF BYTES TO WRITE
00001582  4E4F                    1113              TRAP    #15                     ; WRITE (A1 IS ALREADY THERE)
00001584  2C49                    1114              MOVE.L  A1,A6                   ; GO BACK TO THE BUFFER START
00001586  51CB FFD2               1115              DBRA.W  D3,.LOOPY
0000158A  103C 0038               1116              MOVE.B  #56,D0                  ; CLOSE FILE
0000158E  4E4F                    1117              TRAP    #15
00001590  DFFC 00000200           1118  .END        ADD.L   #512,A7                 ; RESTORE STACK
00001596  4CDF 7FFF               1119              MOVEM.L (A7)+,D0-D7/A0-A6       ; TO BE OPTIMIZED
0000159A  4E75                    1120              RTS
0000159C= 53 45 4C 45 43 54 ...   1121  .MSG        DC.B    'SELECT A CSV FILE TO SAVE',0
000015B6= 2A 2E 43 53 56 00       1122  .FILTER     DC.B    '*.CSV',0
000015BC                          1123              DS.W    0
000015BC                          1124  
000015BC                          1125  ; -----------------------------------------------------------------------------
000015BC                          1126  GRDLOAD
000015BC                          1127  ; LOADS THE GRID FROM A CSV FORMATTED FILE
000015BC                          1128  ; INPUT    : NONE
000015BC                          1129  ; OUTPUT   : NONE
000015BC                          1130  ; MODIFIES : NONE
000015BC                          1131  ; NOTE     : THE LOCAL BUFFER SIZE MUST BE MAX(512,2*GRDWIDTH+1). PLEASE CHANGE
000015BC                          1132  ;            IT ACCORDINGLY IF GRDWIDTH*2+1 IS LARGER THAN 512.
000015BC                          1133  ; -----------------------------------------------------------------------------
000015BC  48E7 FFFE               1134              MOVEM.L D0-D7/A0-A6,-(A7)       ; TO BE OPTIMIZED
000015C0  103C 0032               1135              MOVE.B  #50,D0                  ; CLOSE ALL FILES (RECOMMENDED)
000015C4  4E4F                    1136              TRAP    #15
000015C6  9FFC 00000200           1137              SUB.L   #512,A7                 ; ROW BUFFER IN LOCAL MEMORY
000015CC  103C 003A               1138              MOVE.B  #58,D0                  ; SHOW FILE DIALOG TASK
000015D0  4281                    1139              CLR.L   D1                      ; DISPLAY LOAD DIALOG
000015D2  43F9 0000163C           1140              LEA     .MSG,A1                 ; STANDARD MESSAGE
000015D8  45F9 00001656           1141              LEA     .FILTER,A2              ; NO FILTER
000015DE  264F                    1142              MOVE.L  A7,A3                   ; FILE NAME BUFFER
000015E0  4253                    1143              CLR.W   (A3)                    ; ENSURE THERE IS NO STRING
000015E2  4E4F                    1144              TRAP    #15
000015E4  4A01                    1145              TST.B   D1
000015E6  6700 0048               1146              BEQ     .END                    ; IF CANCELLED, DO NOTHING
000015EA  224B                    1147              MOVE.L  A3,A1                   ; PLACE THE FILENAME INTO A1
000015EC  103C 0033               1148              MOVE.B  #51,D0                  ; OPEN EXISTING FILE
000015F0  4E4F                    1149              TRAP    #15
000015F2  4A40                    1150              TST.W   D0                      ; CHECK ERRORS
000015F4  6600 003A               1151              BNE     .END                    ; IF ERRORS, DO NOTHING MORE
000015F8  2C4F                    1152              MOVE.L  A7,A6                   ; PUT A6 INTO START OF BUFFER
000015FA  224F                    1153              MOVE.L  A7,A1                   ; PUT A1 INTO START OF BUFFER
000015FC  41F9 00001B54           1154              LEA GRDDST, A0                  ; POINTER TO STORE PROCESS. DATA
00001602  363C 001F               1155              MOVE.W  #GRDHEIGH-1,D3
00001606  224E                    1156  .LOOP       MOVE.L  A6,A1
00001608  103C 0035               1157              MOVE.B  #53,D0                  ; READ DATA TASK NUMBER
0000160C  243C 00000081           1158              MOVE.L  #GRDWIDTH*2+1,D2        ; NUMBER OF BYTES TO READ
00001612  4E4F                    1159              TRAP    #15                     ; READ THE DATA
00001614  343C 003F               1160              MOVE.W  #GRDWIDTH-1,D2
00001618  1019                    1161  .COPY       MOVE.B  (A1)+,D0                ; PICK ONE LOADED CHARACTER
0000161A  0400 0030               1162              SUB.B   #'0',D0                 ; CONVERT FROM ASCII TO NUMBER
0000161E  10C0                    1163              MOVE.B  D0,(A0)+                ; STORE DATA
00001620  5289                    1164              ADDQ.L  #1,A1                   ; SKIP THE COMMA
00001622  51CA FFF4               1165              DBRA.W  D2,.COPY
00001626  51CB FFDE               1166              DBRA.W  D3,.LOOP
0000162A  103C 0038               1167              MOVE.B  #56,D0                  ; CLOSE FILE
0000162E  4E4F                    1168              TRAP    #15
00001630  DFFC 00000200           1169  .END        ADD.L   #512,A7                 ; RESTORE STACK
00001636  4CDF 7FFF               1170              MOVEM.L (A7)+,D0-D7/A0-A6       ; TO BE OPTIMIZED
0000163A  4E75                    1171              RTS
0000163C= 53 45 4C 45 43 54 ...   1172  .MSG        DC.B    'SELECT A CSV FILE TO LOAD',0
00001656= 2A 2E 43 53 56 00       1173  .FILTER     DC.B    '*.CSV',0
0000165C                          1174              DS.W    0
0000165C                          1175  
0000165C                          1176  ; -----------------------------------------------------------------------------
0000165C                          1177  GRDLLEFT
0000165C                          1178  ; LOADS THE LEFT PART OF THE GRID FROM A CSV FORMATTED FILE
0000165C                          1179  ; INPUT    : NONE
0000165C                          1180  ; OUTPUT   : NONE
0000165C                          1181  ; MODIFIES : NONE
0000165C                          1182  ; NOTE     : THE LOCAL BUFFER SIZE MUST BE MAX(512,2*GRDWIDTH+1). PLEASE CHANGE
0000165C                          1183  ;            IT ACCORDINGLY IF GRDWIDTH*2+1 IS LARGER THAN 512.
0000165C                          1184  ; NOTE     : ALL THE ACTIVE CELLS ARE STORED AS PLAYER 1 INDEPENDLY OF THEIR
0000165C                          1185  ;            ACTUAL VALUE.
0000165C                          1186  ; -----------------------------------------------------------------------------
0000165C                          1187  
0000165C  48E7 FFFE               1188              MOVEM.L D0-D7/A0-A6,-(A7)       ; TO BE OPTIMIZED
00001660  103C 0032               1189              MOVE.B  #50,D0                  ; CLOSE ALL FILES (RECOMMENDED)
00001664  4E4F                    1190              TRAP    #15
00001666  9FFC 00000200           1191              SUB.L   #512,A7                 ; ROW BUFFER IN LOCAL MEMORY
0000166C  103C 003A               1192              MOVE.B  #58,D0                  ; SHOW FILE DIALOG TASK
00001670  4281                    1193              CLR.L   D1                      ; DISPLAY LOAD DIALOG
00001672  43F9 000016EE           1194              LEA     .MSG,A1                 ; STANDARD MESSAGE
00001678  45F9 0000170D           1195              LEA     .FILTER,A2              ; NO FILTER
0000167E  264F                    1196              MOVE.L  A7,A3                   ; FILE NAME BUFFER
00001680  4253                    1197              CLR.W   (A3)                    ; ENSURE THERE IS NO STRING
00001682  4E4F                    1198              TRAP    #15
00001684  4A01                    1199              TST.B   D1
00001686  6700 005A               1200              BEQ     .END                    ; IF CANCELLED, DO NOTHING
0000168A  224B                    1201              MOVE.L  A3,A1                   ; PLACE THE FILENAME INTO A1
0000168C  103C 0033               1202              MOVE.B  #51,D0                  ; OPEN EXISTING FILE
00001690  4E4F                    1203              TRAP    #15
00001692  4A40                    1204              TST.W   D0                      ; CHECK ERRORS
00001694  6600 004C               1205              BNE     .END                    ; IF ERRORS, DO NOTHING MORE
00001698  2C4F                    1206              MOVE.L  A7,A6                   ; PUT A6 INTO START OF BUFFER
0000169A  224F                    1207              MOVE.L  A7,A1                   ; PUT A1 INTO START OF BUFFER
0000169C  41F9 00001B54           1208              LEA GRDDST, A0                  ; POINTER TO STORE PROCESS. DATA
000016A2  363C 001F               1209              MOVE.W  #GRDHEIGH-1,D3
000016A6  224E                    1210  .LOOP       MOVE.L  A6,A1
000016A8  103C 0035               1211              MOVE.B  #53,D0                  ; READ DATA TASK NUMBER
000016AC  243C 00000081           1212              MOVE.L  #GRDWIDTH*2+1,D2        ; NUMBER OF BYTES TO READ
000016B2  4E4F                    1213              TRAP    #15                     ; READ THE DATA
000016B4  343C 003F               1214              MOVE.W  #GRDWIDTH-1,D2
000016B8  1019                    1215  .COPY       MOVE.B  (A1)+,D0                ; PICK ONE LOADED CHARACTER
000016BA  0400 0030               1216              SUB.B   #'0',D0                 ; CONVERT FROM ASCII TO NUMBER
000016BE                          1217              
000016BE  B03C 0002               1218              CMP.B #2,D0                     ;SI LEE UN 2 PONE UN 0 Y CONTINUA
000016C2  6600 000C               1219              BNE .SIGUIENTE
000016C6  10FC 0000               1220              MOVE.B #0,(A0)+
000016CA  4EF9 000016D2           1221              JMP .CLEAR
000016D0                          1222  .SIGUIENTE            
000016D0  10C0                    1223              MOVE.B  D0,(A0)+                ; STORE DATA
000016D2                          1224  .CLEAR            
000016D2  5289                    1225              ADDQ.L  #1,A1                   ; SKIP THE COMMA
000016D4  51CA FFE2               1226              DBRA.W  D2,.COPY
000016D8  51CB FFCC               1227              DBRA.W  D3,.LOOP
000016DC  103C 0038               1228              MOVE.B  #56,D0                  ; CLOSE FILE
000016E0  4E4F                    1229              TRAP    #15
000016E2  DFFC 00000200           1230  .END        ADD.L   #512,A7                 ; RESTORE STACK
000016E8  4CDF 7FFF               1231              MOVEM.L (A7)+,D0-D7/A0-A6       ; TO BE OPTIMIZED
000016EC  4E75                    1232              RTS
000016EE= 53 45 4C 45 43 54 ...   1233  .MSG        DC.B    'SELECT A CSV FILE LEFT TO LOAD',0
0000170D= 2A 2E 43 53 56 00       1234  .FILTER     DC.B    '*.CSV',0
00001714                          1235              DS.W    0
00001714                          1236  
00001714                          1237  
00001714                          1238  
00001714                          1239  
00001714                          1240  
00001714                          1241  
00001714                          1242  
00001714                          1243  
00001714                          1244  
00001714                          1245  
00001714                          1246  
00001714                          1247  
00001714                          1248  
00001714                          1249  ; -----------------------------------------------------------------------------
00001714                          1250  GRDLRGT
00001714                          1251  ; LOADS THE RIGHT PART OF THE GRID FROM A CSV FORMATTED FILE
00001714                          1252  ; INPUT    : NONE
00001714                          1253  ; OUTPUT   : NONE
00001714                          1254  ; MODIFIES : NONE
00001714                          1255  ; NOTE     : THE LOCAL BUFFER SIZE MUST BE MAX(512,2*GRDWIDTH+1). PLEASE CHANGE
00001714                          1256  ;            IT ACCORDINGLY IF GRDWIDTH*2+1 IS LARGER THAN 512.
00001714                          1257  ; NOTE     : ALL THE ACTIVE CELLS ARE STORED AS PLAYER 2 INDEPENDLY OF THEIR
00001714                          1258  ;            ACTUAL VALUE.
00001714                          1259  ; -----------------------------------------------------------------------------
00001714                          1260  
00001714  48E7 FFFE               1261              MOVEM.L D0-D7/A0-A6,-(A7)       ; TO BE OPTIMIZED
00001718  103C 0032               1262              MOVE.B  #50,D0                  ; CLOSE ALL FILES (RECOMMENDED)
0000171C  4E4F                    1263              TRAP    #15
0000171E  9FFC 00000200           1264              SUB.L   #512,A7                 ; ROW BUFFER IN LOCAL MEMORY
00001724  103C 003A               1265              MOVE.B  #58,D0                  ; SHOW FILE DIALOG TASK
00001728  4281                    1266              CLR.L   D1                      ; DISPLAY LOAD DIALOG
0000172A  43F9 000017A6           1267              LEA     .MSG,A1                 ; STANDARD MESSAGE
00001730  45F9 000017C5           1268              LEA     .FILTER,A2              ; NO FILTER
00001736  264F                    1269              MOVE.L  A7,A3                   ; FILE NAME BUFFER
00001738  4253                    1270              CLR.W   (A3)                    ; ENSURE THERE IS NO STRING
0000173A  4E4F                    1271              TRAP    #15
0000173C  4A01                    1272              TST.B   D1
0000173E  6700 005A               1273              BEQ     .END                    ; IF CANCELLED, DO NOTHING
00001742  224B                    1274              MOVE.L  A3,A1                   ; PLACE THE FILENAME INTO A1
00001744  103C 0033               1275              MOVE.B  #51,D0                  ; OPEN EXISTING FILE
00001748  4E4F                    1276              TRAP    #15
0000174A  4A40                    1277              TST.W   D0                      ; CHECK ERRORS
0000174C  6600 004C               1278              BNE     .END                    ; IF ERRORS, DO NOTHING MORE
00001750  2C4F                    1279              MOVE.L  A7,A6                   ; PUT A6 INTO START OF BUFFER
00001752  224F                    1280              MOVE.L  A7,A1                   ; PUT A1 INTO START OF BUFFER
00001754  41F9 00001B54           1281              LEA GRDDST, A0                  ; POINTER TO STORE PROCESS. DATA
0000175A  363C 001F               1282              MOVE.W  #GRDHEIGH-1,D3
0000175E  224E                    1283  .LOOP       MOVE.L  A6,A1
00001760  103C 0035               1284              MOVE.B  #53,D0                  ; READ DATA TASK NUMBER
00001764  243C 00000081           1285              MOVE.L  #GRDWIDTH*2+1,D2        ; NUMBER OF BYTES TO READ
0000176A  4E4F                    1286              TRAP    #15                     ; READ THE DATA
0000176C  343C 003F               1287              MOVE.W  #GRDWIDTH-1,D2
00001770  1019                    1288  .COPY       MOVE.B  (A1)+,D0                ; PICK ONE LOADED CHARACTER
00001772  0400 0030               1289              SUB.B   #'0',D0                 ; CONVERT FROM ASCII TO NUMBER
00001776                          1290             
00001776  B03C 0001               1291              CMP.B #1,D0                     ;SI LEE UN 1 PONE UN 0 Y CONTINUA
0000177A  6600 000C               1292              BNE .SIGUIENTE
0000177E  10FC 0000               1293              MOVE.B #0,(A0)+
00001782  4EF9 0000178A           1294              JMP .CLEAR
00001788                          1295  .SIGUIENTE            
00001788  10C0                    1296              MOVE.B  D0,(A0)+                ; STORE DATA
0000178A                          1297  .CLEAR            
0000178A  5289                    1298              ADDQ.L  #1,A1                   ; SKIP THE COMMA
0000178C  51CA FFE2               1299              DBRA.W  D2,.COPY
00001790  51CB FFCC               1300              DBRA.W  D3,.LOOP
00001794  103C 0038               1301              MOVE.B  #56,D0                  ; CLOSE FILE
00001798  4E4F                    1302              TRAP    #15
0000179A  DFFC 00000200           1303  .END        ADD.L   #512,A7                 ; RESTORE STACK
000017A0  4CDF 7FFF               1304              MOVEM.L (A7)+,D0-D7/A0-A6       ; TO BE OPTIMIZED
000017A4  4E75                    1305              RTS
000017A6= 53 45 4C 45 43 54 ...   1306  .MSG        DC.B    'SELECT A CSV FILE LEFT TO LOAD',0
000017C5= 2A 2E 43 53 56 00       1307  .FILTER     DC.B    '*.CSV',0
000017CC                          1308              DS.W    0
000017CC                          1309  
000017CC                          1310  ; -----------------------------------------------------------------------------
000017CC                          1311  GRDPLOT
000017CC                          1312  ; PLOTS THE GRID
000017CC                          1313  ; INPUT    : NONE
000017CC                          1314  ; OUTPUT   : NONE
000017CC                          1315  ; MODIFIES : NONE
000017CC                          1316  ; -----------------------------------------------------------------------------
000017CC                          1317  
000017CC                          1318  ; TODO : PLACE YOUR CODE HERE
000017CC                          1319  
000017CC  48E7 FEF0               1320      MOVEM.L D0-D6/A0-A3, -(A7)
000017D0                          1321      
000017D0  41F9 00001B54           1322      LEA GRDDST, A0      ;A0: PUNTERO A DONDE SE ESCRIBE
000017D6  43F9 00002B58           1323      LEA GRDNPLR1, A1
000017DC  45F9 00002B5A           1324      LEA GRDNPLR2, A2
000017E2  32BC 0000               1325      MOVE.W #0,(A1)
000017E6  34BC 0000               1326      MOVE.W #0,(A2)    
000017EA                          1327      
000017EA  3A3C 0020               1328      MOVE.W  #GRDHEIGH,D5 ;N FILAS
000017EE  5345                    1329      SUBQ.W #1,D5
000017F0                          1330      
000017F0  3C3C 0040               1331      MOVE.W  #GRDWIDTH,D6 ;N COLUMNAS
000017F4  5346                    1332      SUBQ.W #1,D6
000017F6                          1333      
000017F6                          1334      
000017F6                          1335      ;VERDE
000017F6  103C 0050               1336      MOVE.B #80,D0
000017FA  223C 00005500           1337      MOVE.L #CLRDKGRN,D1
00001800  4E4F                    1338      TRAP #15
00001802                          1339    
00001802                          1340      ;ANCHURA
00001802  103C 005D               1341      MOVE.B #93,D0
00001806  123C 0002               1342      MOVE.B #2,D1
0000180A  4E4F                    1343      TRAP #15
0000180C                          1344      
0000180C  343C 009E               1345      MOVE.W #GRDYOFF, D2     ;CORDENADA INICIAL Y
00001810  363C 0010               1346      MOVE.W #GRDXOFF, D3     ;COORDENADA INICIAL X
00001814                          1347      
00001814                          1348      
00001814                          1349      
00001814                          1350  .ROW:
00001814                          1351      
00001814  1E18                    1352      MOVE.B (A0)+,D7
00001816                          1353      
00001816  BE7C 0001               1354      CMP #1,D7 ;MIRA SI ES DE JUGADOR 1
0000181A  6700 0040               1355      BEQ .PLAYER1
0000181E                          1356      
0000181E  BE7C 0002               1357      CMP #2,D7 ;MIRA SI ES JUGADOR 2
00001822  6700 005C               1358      BEQ .PLAYER2
00001826                          1359      
00001826                          1360      
00001826                          1361      ;NO HAY CELULA
00001826                          1362      ;FILL COLOR
00001826  103C 0051               1363      MOVE.B #81,D0
0000182A  7200                    1364      MOVE.L #CLRBLACK,D1
0000182C  4E4F                    1365      TRAP #15
0000182E                          1366      
0000182E                          1367      ;RECTANGULO
0000182E  103C 0057               1368      MOVE.B #87,D0
00001832  3203                    1369      MOVE.W D3,D1
00001834  3802                    1370      MOVE.W D2,D4    
00001836                          1371      
00001836                          1372      ;SIGUIENTE
00001836  0643 000C               1373      ADD.W #GRDSZCEL,D3
0000183A  0644 000C               1374      ADD.W #GRDSZCEL,D4
0000183E  4E4F                    1375      TRAP #15
00001840                          1376      
00001840                          1377      
00001840                          1378  .LOOP_JUGADORES: 
00001840  51CE FFD2               1379      DBRA D6, .ROW
00001844  363C 0010               1380      MOVE.W #GRDXOFF,D3  ;COORDENADA INICIAL X  
00001848                          1381      
00001848                          1382      
00001848  0642 000C               1383      ADD.W #GRDSZCEL,D2              
0000184C                          1384      
0000184C  3C3C 0040               1385      MOVE.W  #GRDWIDTH,D6 ;N COLUMNAS
00001850  5346                    1386      SUBQ.W #1,D6
00001852                          1387      
00001852  51CD FFC0               1388      DBRA D5, .ROW
00001856  4EF9 000018A4           1389      JMP .FINAL
0000185C                          1390  
0000185C                          1391  .PLAYER1: ;RECTANGULOS P2
0000185C                          1392  
0000185C                          1393      
0000185C  103C 0051               1394      MOVE.B #81,D0 ;COLOR
00001860  223C 00FF0000           1395      MOVE.L #CLRLTBLU,D1
00001866  4E4F                    1396      TRAP #15
00001868                          1397      
00001868  103C 0057               1398      MOVE.B #87,D0 ;RECTANGULO
0000186C  3203                    1399      MOVE.W D3,D1
0000186E  3802                    1400      MOVE.W D2,D4
00001870                          1401      
00001870  0643 000C               1402      ADD.W #GRDSZCEL,D3 ;SIGUIENTE
00001874  0644 000C               1403      ADD.W #GRDSZCEL,D4
00001878  4E4F                    1404      TRAP #15
0000187A                          1405      
0000187A  5251                    1406      ADDQ.W #1, (A1) ;AUMENTA CONTADOR DE P1
0000187C                          1407      
0000187C  4EF8 1840               1408      JMP .LOOP_JUGADORES
00001880                          1409  
00001880                          1410  
00001880                          1411  .PLAYER2: ;RECTANGULOS P2
00001880                          1412      
00001880  103C 0051               1413      MOVE.B #81,D0 ;FILL COLOR
00001884  223C 000000FF           1414      MOVE.L #CLRLTRED,D1
0000188A  4E4F                    1415      TRAP #15
0000188C                          1416      
0000188C                          1417      
0000188C  103C 0057               1418      MOVE.B #87,D0 ;RECTANGULO
00001890  3203                    1419      MOVE.W D3,D1
00001892  3802                    1420      MOVE.W D2,D4
00001894                          1421      
00001894                          1422      
00001894  0643 000C               1423      ADD.W #GRDSZCEL,D3 ;SIGUIENTE CELDA
00001898  0644 000C               1424      ADD.W #GRDSZCEL,D4
0000189C  4E4F                    1425      TRAP #15    
0000189E  5252                    1426      ADDQ.W #1, (A2) ;AUMENTA CONTADOR DE P2
000018A0                          1427  
000018A0                          1428  
000018A0  4EF8 1840               1429      JMP .LOOP_JUGADORES
000018A4                          1430   
000018A4                          1431            
000018A4                          1432  .FINAL: ;CONTADORES
000018A4                          1433      
000018A4                          1434      ;P1
000018A4  103C 0051               1435      MOVE.B #81,D0
000018A8  223C 00FF0000           1436      MOVE.L #CLRLTBLU,D1
000018AE  4E4F                    1437      TRAP #15
000018B0                          1438      
000018B0  103C 000B               1439      MOVE.B #11,D0
000018B4  323C 0209               1440      MOVE.W #GRDSCP1X<<8|GRDSCP1Y,D1
000018B8  4E4F                    1441      TRAP #15
000018BA                          1442      
000018BA  103C 0003               1443      MOVE.B #3,D0
000018BE  43F9 00002B58           1444      LEA GRDNPLR1,A1
000018C4  3411                    1445      MOVE.W (A1),D2
000018C6  2202                    1446      MOVE.L D2,D1
000018C8  4E4F                    1447      TRAP #15
000018CA                          1448      
000018CA                          1449      ;P2 
000018CA  103C 0051               1450      MOVE.B #81,D0
000018CE  223C 000000FF           1451      MOVE.L #CLRLTRED,D1
000018D4  4E4F                    1452      TRAP #15
000018D6                          1453      
000018D6  103C 000B               1454      MOVE.B #11,D0
000018DA  323C 5E09               1455      MOVE.W #GRDSCP2X<<8|GRDSCP2Y,D1
000018DE  4E4F                    1456      TRAP #15
000018E0                          1457      
000018E0  103C 0003               1458      MOVE.B #3,D0
000018E4  43F9 00002B5A           1459      LEA GRDNPLR2,A1
000018EA  3411                    1460      MOVE.W (A1),D2
000018EC  2202                    1461      MOVE.L D2,D1
000018EE  4E4F                    1462      TRAP #15
000018F0                          1463      
000018F0  103C 005F               1464      MOVE.B #95,D0
000018F4  323C 005E               1465      MOVE.W #GRDSCP2X,D1
000018F8  343C 0009               1466      MOVE.W #GRDSCP2Y,D2
000018FC  43F9 00002B5A           1467      LEA GRDNPLR2,A1
00001902  4E4F                    1468      TRAP #15
00001904                          1469     
00001904                          1470     ;PUNTUACION GLOBAL
00001904  103C 0051               1471      MOVE.B #81,D0
00001908  223C 00005500           1472      MOVE.L #CLRDKGRN,D1
0000190E  4E4F                    1473      TRAP #15
00001910                          1474      
00001910  103C 000B               1475      MOVE.B #11,D0
00001914  323C 3009               1476      MOVE.W #GRDSCNGX<<8|GRDSCNGY,D1
00001918  4E4F                    1477      TRAP #15
0000191A                          1478      
0000191A  103C 0003               1479      MOVE.B #3,D0
0000191E  43F9 00002B5C           1480      LEA GRDNGEN,A1
00001924  3411                    1481      MOVE.W (A1),D2
00001926  2202                    1482      MOVE.L D2,D1
00001928  4E4F                    1483      TRAP #15
0000192A                          1484      
0000192A  103C 005F               1485      MOVE.B #95,D0
0000192E  323C 0030               1486      MOVE.W #GRDSCNGX,D1
00001932  343C 0009               1487      MOVE.W #GRDSCNGY,D2
00001936  43F9 00002B5C           1488      LEA GRDNGEN,A1
0000193C  4E4F                    1489      TRAP #15
0000193E                          1490  
0000193E  4CDF 0F7F               1491      MOVEM.L  (A7)+, D0-D6/A0-A3
00001942  4E75                    1492      RTS
00001944                          1493   
00001944                          1494   
00001944                          1495   
00001944                          1496   
00001944                          1497  
00001944                          1498  
00001944                          1499  
00001944                          1500  
00001944                          1501  
00001944                          1502  
00001944                          1503  
00001944                          1504  
00001944                          1505  
00001944                          1506  
00001944                          1507  
00001944                          1508  
00001944                          1509  
00001944                          1510  
00001944                          1511  
00001944                          1512  
00001944                          1513  
00001944                          1514  
00001944                          1515  
00001944                          1516  
00001944                          1517  -------------------- end include --------------------
00001944                          1518              INCLUDE "GOL.X68"               ; GAME OF LIFE APPLICATION
00001944                          1519  ; =============================================================================
00001944                          1520  ; TITLE    : GAME OF LIFE APPLICATION
00001944                          1521  ; AUTHOR   : ANTONI BURGUERA
00001944                          1522  ; HISTORY  : 05-JULY-2021 - CREATION
00001944                          1523  ; COMMENTS : THIS IS AN APPLICATION. SO, IT IMPLEMENTS INITIALIZATION, UPDATE
00001944                          1524  ;            AND PLOT, AS WELL AS SOME AUXILIARY SUBROUTINES.
00001944                          1525  ; =============================================================================
00001944                          1526  
00001944                          1527  ; -----------------------------------------------------------------------------
00001944                          1528  GOLINIT
00001944                          1529  ; INITIALIZE GAME OF LIFE APPLICATION AS FOLLOWS:
00001944                          1530  ; * MAKES THE INTERNAL STATE TO BE "PAUSED/STOPPED"
00001944                          1531  ; * INITIALIZES THE USER INTERFACE (BY INITIALIZING THE BUTTONS LIST AND
00001944                          1532  ;   ADDING BUTTONS INTO IT)
00001944                          1533  ; * INITIALIZES THE GRID.
00001944                          1534  ; * INITIALIZES THE UTILITY CODE.
00001944                          1535  ; INPUT    : NONE
00001944                          1536  ; OUTPUT   : NONE
00001944                          1537  ; MODIFIES : NONE
00001944                          1538  ; -----------------------------------------------------------------------------
00001944  48E7 FFFE               1539              MOVEM.L D0-D7/A0-A6,-(A7)
00001948  13FC 0000 00002B5E      1540              MOVE.B  #GOLSPAUS,(GOLSTATE)
00001950  4EB8 1352               1541              JSR     BTLINIT
00001954  41F9 0000197A           1542              LEA     .SDBLIST,A0
0000195A  2258                    1543  .LOOP       MOVE.L  (A0)+,A1
0000195C  B3FC FFFFFFFF           1544              CMP.L   #-1,A1
00001962  6700 0008               1545              BEQ     .END
00001966  4EB8 1372               1546              JSR     BTLADD
0000196A  60EE                    1547              BRA     .LOOP
0000196C  4EB8 13EC               1548  .END        JSR     GRDINIT
00001970  4EB8 10DC               1549              JSR     UTLINIT
00001974  4CDF 7FFF               1550              MOVEM.L (A7)+,D0-D7/A0-A6
00001978  4E75                    1551              RTS
0000197A= 00001A56 00001A68 ...   1552  .SDBLIST    DC.L    GOLCLRBT,GOLRUNBT,GOLSTPBT,GOLSTEBT,GOLLLFBT,GOLLRTBT
00001992= 00001ACA 00001AE0 ...   1553              DC.L    GOLLOABT,GOLSAVBT,-1
0000199E                          1554  
0000199E                          1555  ; -----------------------------------------------------------------------------
0000199E                          1556  GOLUPD
0000199E                          1557  ; UPDATE GAME OF LIFE APPLICATION AS FOLLOWS:
0000199E                          1558  ; * UPDATES THE BUTTON LIST
0000199E                          1559  ; * EXECUTES CODE DEPENDING ON THE CURRENT APPLICATION STATE.
0000199E                          1560  ; INPUT    : NONE
0000199E                          1561  ; OUTPUT   : NONE
0000199E                          1562  ; MODIFIES : NONE
0000199E                          1563  ; -----------------------------------------------------------------------------
0000199E  48E7 C0C0               1564              MOVEM.L A0-A1/D0-D1,-(A7)
000019A2  4EB8 139C               1565              JSR     BTLUPD
000019A6  41F9 000019C2           1566              LEA     .JMPTBL,A0
000019AC  4280                    1567              CLR.L   D0
000019AE  1039 00002B5E           1568              MOVE.B  (GOLSTATE),D0
000019B4  E508                    1569              LSL.B   #2,D0
000019B6  2070 0000               1570              MOVE.L  (A0,D0),A0
000019BA  4E90                    1571              JSR     (A0)
000019BC  4CDF 0303               1572              MOVEM.L (A7)+,A0-A1/D0-D1
000019C0  4E75                    1573              RTS
000019C2= 0000142C 000019D2       1574  .JMPTBL     DC.L    GRDMUPD,GOLDORUN
000019CA                          1575  
000019CA                          1576  ; -----------------------------------------------------------------------------
000019CA                          1577  GOLPLOT
000019CA                          1578  ; PLOTS THE APPLICATION BY CALLING BTLPLOT AND GRDPLOT
000019CA                          1579  ; INPUT    : NONE
000019CA                          1580  ; OUTPUT   : NONE
000019CA                          1581  ; MODIFIES : NONE
000019CA                          1582  ; -----------------------------------------------------------------------------
000019CA  4EB8 13C4               1583              JSR     BTLPLOT
000019CE  4EF8 17CC               1584              JMP     GRDPLOT
000019D2                          1585  
000019D2                          1586  ; -----------------------------------------------------------------------------
000019D2                          1587  GOLDORUN
000019D2                          1588  ; EXECUTES THE RUN STATE. IT ALSO CHECKS IF THE MAXIMUM NUMBER OF GENERATIONS
000019D2                          1589  ; IS REACHED AND, IF SO, ANNOUNCES THE WINNER.
000019D2                          1590  ; INPUT    : NONE
000019D2                          1591  ; OUTPUT   : NONE
000019D2                          1592  ; MODIFIES : NONE
000019D2                          1593  ; -----------------------------------------------------------------------------
000019D2  48E7 8040               1594              MOVEM.L D0/A1,-(A7)
000019D6  0C79 00FA 00002B5C      1595              CMP.W   #GOLMAXGN,(GRDNGEN)
000019DE  6D00 0034               1596              BLT     .DOIT
000019E2  43F9 00001A34           1597              LEA     .TIE,A1
000019E8  3039 00002B58           1598              MOVE.W  (GRDNPLR1),D0
000019EE  B079 00002B5A           1599              CMP.W   (GRDNPLR2),D0
000019F4  6700 0012               1600              BEQ     .PLAYSOUND
000019F8  43F9 00001A1E           1601              LEA     .P1WINS,A1
000019FE  6E00 0008               1602              BGT     .PLAYSOUND
00001A02  43F9 00001A29           1603              LEA     .P2WINS,A1
00001A08  103C 0046               1604  .PLAYSOUND  MOVE.B  #70,D0
00001A0C  4E4F                    1605              TRAP    #15
00001A0E  4EB9 00001A4C           1606  .NOSOUND    JSR     GOLTOPAU
00001A14  4EB8 14D4               1607  .DOIT       JSR     GRDRUPD
00001A18  4CDF 0201               1608              MOVEM.L (A7)+,D0/A1
00001A1C  4E75                    1609              RTS
00001A1E= 50 31 57 49 4E 53 ...   1610  .P1WINS     DC.B    'P1WINS.WAV',0
00001A29= 50 32 57 49 4E 53 ...   1611  .P2WINS     DC.B    'P2WINS.WAV',0
00001A34= 54 49 45 2E 57 41 ...   1612  .TIE        DC.B    'TIE.WAV',0
00001A3C                          1613              DS.W    0
00001A3C                          1614  
00001A3C                          1615  ; -----------------------------------------------------------------------------
00001A3C                          1616  GOLTORUN
00001A3C                          1617  ; SWITCHES TO RUN STATE
00001A3C                          1618  ; INPUT    : NONE
00001A3C                          1619  ; OUTPUT   : NONE
00001A3C                          1620  ; MODIFIES : NONE
00001A3C                          1621  ; -----------------------------------------------------------------------------
00001A3C  4279 00002B5C           1622              CLR.W   (GRDNGEN)               ; CLEAR GENERATIONS COUNT
00001A42  13FC 0001 00002B5E      1623              MOVE.B  #GOLSEXEC,(GOLSTATE)
00001A4A  4E75                    1624              RTS
00001A4C                          1625  
00001A4C                          1626  ; -----------------------------------------------------------------------------
00001A4C                          1627  GOLTOPAU
00001A4C                          1628  ; SWITCHES TO PAUSE STATE
00001A4C                          1629  ; INPUT    : NONE
00001A4C                          1630  ; OUTPUT   : NONE
00001A4C                          1631  ; MODIFIES : NONE
00001A4C                          1632  ; -----------------------------------------------------------------------------
00001A4C  13FC 0000 00002B5E      1633              MOVE.B  #GOLSPAUS,(GOLSTATE)
00001A54  4E75                    1634              RTS
00001A56                          1635  
00001A56                          1636  ; --- STATIC DATA -------------------------------------------------------------
00001A56                          1637  
00001A56                          1638  ; CLEAR BUTTON SDB
00001A56                          1639  
00001A56= 000A                    1640  GOLCLRBT    DC.W    BTLVEMRG                ; YTOP
00001A58= 000A                    1641              DC.W    0*(SCRWIDTH/4)+BTLHOMRG ; XLEFT
00001A5A= 0028                    1642              DC.W    BTLVERSZ                ; HEIGHT
00001A5C= 00B4                    1643              DC.W    SCRWIDTH/4-2*BTLHOMRG   ; WIDTH
00001A5E                          1644  ; TODO: PLACE THE CALLBACK HERE
00001A5E                          1645              
00001A5E= 000013EC                1646              DC.L   GRDINIT
00001A62                          1647              
00001A62= 43 4C 45 41 52 00       1648              DC.B    'CLEAR',0               ; TEXT
00001A68                          1649              DS.W    0
00001A68                          1650  
00001A68                          1651  ; RUN BUTTON SDB
00001A68                          1652  
00001A68= 000A                    1653  GOLRUNBT    DC.W    BTLVEMRG                ; YTOP
00001A6A= 00D2                    1654              DC.W    1*(SCRWIDTH/4)+BTLHOMRG ; XLEFT
00001A6C= 0028                    1655              DC.W    BTLVERSZ                ; HEIGHT
00001A6E= 00B4                    1656              DC.W    SCRWIDTH/4-2*BTLHOMRG   ; WIDTH
00001A70                          1657  ; TODO: PLACE THE CALLBACK HERE
00001A70= 00001A3C                1658              DC.L   GOLTORUN
00001A74= 52 55 4E 00             1659              DC.B    'RUN',0                 ; TEXT
00001A78                          1660              DS.W    0
00001A78                          1661  
00001A78                          1662  ; STOP BUTTON SDB
00001A78                          1663  
00001A78= 000A                    1664  GOLSTPBT    DC.W    BTLVEMRG                ; YTOP
00001A7A= 019A                    1665              DC.W    2*(SCRWIDTH/4)+BTLHOMRG ; XLEFT
00001A7C= 0028                    1666              DC.W    BTLVERSZ                ; HEIGHT
00001A7E= 00B4                    1667              DC.W    SCRWIDTH/4-2*BTLHOMRG   ; WIDTH
00001A80                          1668  ; TODO: PLACE THE CALLBACK HERE
00001A80= 00001A4C                1669              DC.L  GOLTOPAU
00001A84= 53 54 4F 50 00          1670              DC.B    'STOP',0                ; TEXT
00001A8A                          1671              DS.W    0
00001A8A                          1672  
00001A8A                          1673  ; STEP BUTTON SDB
00001A8A                          1674  
00001A8A= 000A                    1675  GOLSTEBT    DC.W    BTLVEMRG                ; YTOP
00001A8C= 0262                    1676              DC.W    3*(SCRWIDTH/4)+BTLHOMRG ; XLEFT
00001A8E= 0028                    1677              DC.W    BTLVERSZ                ; HEIGHT
00001A90= 00B4                    1678              DC.W    SCRWIDTH/4-2*BTLHOMRG   ; WIDTH
00001A92                          1679  ; TODO: PLACE THE CALLBACK HEREÇ
00001A92= 000019D2                1680              DC.L GOLDORUN
00001A96= 53 54 45 50 00          1681              DC.B    'STEP',0                ; TEXT
00001A9C                          1682              DS.W    0
00001A9C                          1683  
00001A9C                          1684  ; LOAD LEFT BUTTON SDB
00001A9C                          1685  
00001A9C= 003C                    1686  GOLLLFBT    DC.W    2*BTLVEMRG+BTLVERSZ     ; YTOP
00001A9E= 000A                    1687              DC.W    0*(SCRWIDTH/4)+BTLHOMRG ; XLEFT
00001AA0= 0028                    1688              DC.W    BTLVERSZ                ; HEIGHT
00001AA2= 00B4                    1689              DC.W    SCRWIDTH/4-2*BTLHOMRG   ; WIDTH
00001AA4                          1690  ; TODO: PLACE THE CALLBACK HERE
00001AA4= 0000165C                1691              DC.L GRDLLEFT
00001AA8= 4C 4F 41 44 20 4C ...   1692              DC.B    'LOAD LEFT',0           ; TEXT
00001AB2                          1693              DS.W    0
00001AB2                          1694  
00001AB2                          1695  ; LOAD RIGHT BUTTON SDB
00001AB2                          1696  
00001AB2= 003C                    1697  GOLLRTBT    DC.W    2*BTLVEMRG+BTLVERSZ     ; YTOP
00001AB4= 00D2                    1698              DC.W    1*(SCRWIDTH/4)+BTLHOMRG ; XLEFT
00001AB6= 0028                    1699              DC.W    BTLVERSZ                ; HEIGHT
00001AB8= 00B4                    1700              DC.W    SCRWIDTH/4-2*BTLHOMRG   ; WIDTH
00001ABA                          1701  ; TODO: PLACE THE CALLBACK HERE
00001ABA= 00001714                1702              DC.L   GRDLRGT
00001ABE= 4C 4F 41 44 20 52 ...   1703              DC.B    'LOAD RIGHT',0          ; TEXT
00001ACA                          1704              DS.W    0
00001ACA                          1705  
00001ACA                          1706  ; LOAD ALL BUTTON SDB
00001ACA                          1707  
00001ACA= 003C                    1708  GOLLOABT    DC.W    2*BTLVEMRG+BTLVERSZ     ; YTOP
00001ACC= 019A                    1709              DC.W    2*(SCRWIDTH/4)+BTLHOMRG ; XLEFT
00001ACE= 0028                    1710              DC.W    BTLVERSZ                ; HEIGHT
00001AD0= 00B4                    1711              DC.W    SCRWIDTH/4-2*BTLHOMRG   ; WIDTH
00001AD2                          1712  ; TODO: PLACE THE CALLBACK HERE
00001AD2= 000015BC                1713              DC.L GRDLOAD 
00001AD6= 4C 4F 41 44 20 41 ...   1714              DC.B    'LOAD ALL',0            ; TEXT
00001AE0                          1715              DS.W    0
00001AE0                          1716  
00001AE0                          1717  ; SAVE BUTTON SDB
00001AE0                          1718  
00001AE0= 003C                    1719  GOLSAVBT    DC.W    2*BTLVEMRG+BTLVERSZ     ; YTOP
00001AE2= 0262                    1720              DC.W    3*(SCRWIDTH/4)+BTLHOMRG ; XLEFT
00001AE4= 0028                    1721              DC.W    BTLVERSZ                ; HEIGHT
00001AE6= 00B4                    1722              DC.W    SCRWIDTH/4-2*BTLHOMRG   ; WIDTH
00001AE8                          1723  ; TODO: PLACE THE CALLBACK HERE
00001AE8= 00001510                1724              DC.L    GRDSAVE
00001AEC= 53 41 56 45 00          1725              DC.B    'SAVE',0          ; TEXT
00001AF2                          1726              DS.W    0
00001AF2                          1727  
00001AF2                          1728  
00001AF2                          1729  
00001AF2                          1730  
00001AF2                          1731  -------------------- end include --------------------
00001AF2                          1732  
00001AF2                          1733  ; --- INITIALIZE --------------------------------------------------------------
00001AF2                          1734  
00001AF2  4EB8 1000               1735  START       JSR     SYSINIT                 ; INITIALIZE SYSTEM CODE
00001AF6  4EB8 1944               1736              JSR     GOLINIT                 ; INITIALIZE GAME OF LIFE
00001AFA                          1737  
00001AFA                          1738  ; --- UPDATE ------------------------------------------------------------------
00001AFA                          1739  
00001AFA  4E41                    1740  .LOOP       TRAP    #MOUTRAP                ; READ MOUSE
00001AFC  4EB8 199E               1741              JSR     GOLUPD                  ; UPDATE APPLICATION
00001B00                          1742  
00001B00                          1743  ; --- PLOT --------------------------------------------------------------------
00001B00                          1744  
00001B00  4EB8 19CA               1745              JSR     GOLPLOT                 ; PLOT APPLICATION
00001B04  4E40                    1746              TRAP    #SCRTRAP                ; SHOW GRAPHICS
00001B06  60F2                    1747              BRA     .LOOP
00001B08  FFFF FFFF               1748              SIMHALT
00001B0C                          1749  
00001B0C                          1750  ; --- VARIABLES ---------------------------------------------------------------
00001B0C                          1751  
00001B0C                          1752              INCLUDE "SYSVAR.X68"            ; SYSTEM VARIABLES
00001B0C                          1753  ; =============================================================================
00001B0C                          1754  ; TITLE    : SYSTEM VARS
00001B0C                          1755  ; AUTHOR   : ANTONI BURGUERA
00001B0C                          1756  ; HISTORY  : 05-JULY-2021 - CREATION
00001B0C                          1757  ; COMMENTS : * ALL THESE VARS ARE USED TO SHARE DATA FROM SYSTEM TO USER. THUS
00001B0C                          1758  ;              THEY MUST NOT BE IN PROTECTED MEMORY.
00001B0C                          1759  ;
00001B0C                          1760  ;            * SINCE SOME SUBROUTINES TAKE ADVANTAGE OF THE ORDER IN WHICH
00001B0C                          1761  ;              THE VARIABLES ARE IN MEMORY, THEIR ORDER SHOULD NOT BE ALTERED.
00001B0C                          1762  ; =============================================================================
00001B0C                          1763  
00001B0C                          1764  ; --- MOUSE RELATED VARIABLES -------------------------------------------------
00001B0C                          1765  
00001B0C                          1766  MOUY        DS.W    1                       ; MOUSE Y COORDINATE
00001B0E                          1767  MOUX        DS.W    1                       ; MOUSE X COORDINATE
00001B10                          1768  MOUVAL      DS.B    1                       ; CURRENT MOUSE BUTTON STATUS
00001B11                          1769  MOUEDGE     DS.B    1                       ; RISING EDGES IN MOUVAL
00001B12                          1770              DS.W    0
00001B12                          1771  -------------------- end include --------------------
00001B12                          1772              INCLUDE "VAR.X68"               ; USER VARIABLES
00001B12                          1773  ; =============================================================================
00001B12                          1774  ; TITLE    : USER VARS
00001B12                          1775  ; AUTHOR   : ANTONI BURGUERA
00001B12                          1776  ; HISTORY  : 05-JULY-2021 - CREATION
00001B12                          1777  ; COMMENTS : SEE THE CORRESPONDING FILES (UTIL.X68, BTNLIST.X68, GRID.X68 OR
00001B12                          1778  ;            GOL.X68) TO LEARN ABOUT THE MEANING OF THESE VARIABLES.
00001B12                          1779  ; =============================================================================
00001B12                          1780  
00001B12                          1781  ; --- UTILITY VARS ------------------------------------------------------------
00001B12                          1782  
00001B12                          1783  UTLRNDIX    DS.B    1                       ; RANDOM GENERATOR INDEX
00001B14                          1784              DS.W    0
00001B14                          1785  
00001B14                          1786  ; --- BUTTON LIST -------------------------------------------------------------
00001B14                          1787  
00001B14                          1788  BTLDATA     DS.B    BTLMXVDB*BTNSZVDB       ; BUTTONS VDB STORAGE
00001B50                          1789              DS.W    0
00001B50                          1790  
00001B50                          1791  ; --- GRID --------------------------------------------------------------------
00001B50                          1792  
00001B50                          1793  GRDSRC      DS.L    1                       ; SOURCE MATRIX POINTER
00001B54                          1794  GRDDST      DS.L    1                       ; DESTINATION MATRIX POINTER
00001B58                          1795  GRDMATR0    DS.B    GRDWIDTH*GRDHEIGH       ; ONE OF THE GRIDS...
00002358                          1796  GRDMATR1    DS.B    GRDWIDTH*GRDHEIGH       ; THE OTHER GRID
00002B58                          1797  GRDNPLR1    DS.W    1                       ; NUMBER OF PLAYER 1 CELLS
00002B5A                          1798  GRDNPLR2    DS.W    1                       ; NUMBER OF PLAYER 2 CELLS
00002B5C                          1799  GRDNGEN     DS.W    1                       ; NUMOER OF GENERATIONS
00002B5E                          1800  
00002B5E                          1801  ; --- APPLICATION -------------------------------------------------------------
00002B5E                          1802  
00002B5E                          1803  GOLSTATE    DS.B    1                       ; APPLICATION STATE
00002B60                          1804              DS.W    0
00002B60                          1805  -------------------- end include --------------------
00002B60                          1806  
00002B60                          1807              END    START

No errors detected
No warnings generated


SYMBOL TABLE INFORMATION
Symbol-name         Value
-------------------------
BTLADD              1372
BTLADD:END          1390
BTLADD:FOUND        1396
BTLADD:LOOP         1380
BTLCLEAR            1352
BTLDATA             1B14
BTLHOMRG            A
BTLINIT             1352
BTLINIT:LOOP        1360
BTLMXVDB            A
BTLPLOT             13C4
BTLPLOT:FIN         13E6
BTLPLOT:LOOP        13D2
BTLUPD              139C
BTLUPD:DONE         13BE
BTLUPD:LOOP         13AA
BTLVEMRG            A
BTLVERSZ            28
BTNINIT             1214
BTNPENCL            5500
BTNPENWD            4
BTNPLOT             12BA
BTNPRSCL            6600
BTNSELCL            AA00
BTNSZVDB            6
BTNUPD              121C
C                   12AA
CHRHEIGH            10
CHRSHHEI            4
CHRSHWID            3
CHRWIDTH            8
CLRBLACK            0
CLRDKGRN            5500
CLRLTBLU            FF0000
CLRLTGRN            AA00
CLRLTRED            FF
CLRMDGRN            6600
CLRWHITE            FFFFFF
DENTRO              12E6
DENTROY             1250
FINAL               12B4
FINAL1              131A
FUERA               1312
GOLCLRBT            1A56
GOLDORUN            19D2
GOLDORUN:DOIT       1A14
GOLDORUN:NOSOUND    1A0E
GOLDORUN:P1WINS     1A1E
GOLDORUN:P2WINS     1A29
GOLDORUN:PLAYSOUND  1A08
GOLDORUN:TIE        1A34
GOLINIT             1944
GOLINIT:END         196C
GOLINIT:LOOP        195A
GOLINIT:SDBLIST     197A
GOLLLFBT            1A9C
GOLLOABT            1ACA
GOLLRTBT            1AB2
GOLMAXGN            FA
GOLPLOT             19CA
GOLRUNBT            1A68
GOLSAVBT            1AE0
GOLSEXEC            1
GOLSPAUS            0
GOLSTATE            2B5E
GOLSTEBT            1A8A
GOLSTPBT            1A78
GOLTOPAU            1A4C
GOLTORUN            1A3C
GOLUPD              199E
GOLUPD:JMPTBL       19C2
GRDCOLP1            FF0000
GRDCOLP2            FF
GRDDST              1B54
GRDHEIGH            20
GRDINIT             13EC
GRDINIT:LOOP        1420
GRDLLEFT            165C
GRDLLEFT:CLEAR      16D2
GRDLLEFT:COPY       16B8
GRDLLEFT:END        16E2
GRDLLEFT:FILTER     170D
GRDLLEFT:LOOP       16A6
GRDLLEFT:MSG        16EE
GRDLLEFT:SIGUIENTE  16D0
GRDLOAD             15BC
GRDLOAD:COPY        1618
GRDLOAD:END         1630
GRDLOAD:FILTER      1656
GRDLOAD:LOOP        1606
GRDLOAD:MSG         163C
GRDLRGT             1714
GRDLRGT:CLEAR       178A
GRDLRGT:COPY        1770
GRDLRGT:END         179A
GRDLRGT:FILTER      17C5
GRDLRGT:LOOP        175E
GRDLRGT:MSG         17A6
GRDLRGT:SIGUIENTE   1788
GRDMATR0            1B58
GRDMATR1            2358
GRDMSHEI            1F
GRDMSWID            3F
GRDMUPD             142C
GRDMUPD:FINAL       14CE
GRDMUPD:P2          14B6
GRDMUPD:R_GRID      14CA
GRDNGEN             2B5C
GRDNPLR1            2B58
GRDNPLR2            2B5A
GRDPLOT             17CC
GRDPLOT:FINAL       18A4
GRDPLOT:LOOP_JUGADORES  1840
GRDPLOT:PLAYER1     185C
GRDPLOT:PLAYER2     1880
GRDPLOT:ROW         1814
GRDPXHEI            180
GRDPXWID            300
GRDRUPD             14D4
GRDRUPD:BUCLE       150A
GRDRUPD:FINAL       150A
GRDSAVE             1510
GRDSAVE:END         1590
GRDSAVE:FILTER      15B6
GRDSAVE:LOOP        155E
GRDSAVE:LOOPY       155A
GRDSAVE:MSG         159C
GRDSCNGX            30
GRDSCNGY            9
GRDSCP1X            2
GRDSCP1Y            9
GRDSCP2X            5E
GRDSCP2Y            9
GRDSHHEI            5
GRDSHWID            6
GRDSRC              1B50
GRDSZCEL            C
GRDVEMRG            6E
GRDWIDTH            40
GRDXOFF             10
GRDYOFF             9E
I                   127A
MAYORX              126C
MAYORY              1242
MOUBITLF            0
MOUBITMD            2
MOUBITRT            1
MOUEDGE             1B11
MOUINIT             102A
MOUMSKLF            1
MOUMSKMD            4
MOUMSKRT            2
MOUREAD             1058
MOUTRAP             1
MOUVAL              1B10
MOUX                1B0E
MOUY                1B0C
NOT_2048            7FF
NOT_32              3F
NOT_64              7F
P                   1292
PULSADO             1300
SCRHEIGH            258
SCRINIT             108A
SCRTRAP             0
SCRUPD              10C2
SCRWIDTH            320
START               1AF2
START:LOOP          1AFA
SYSINIT             1000
UTLINIT             10DC
UTLRAND             10F6
UTLRAND:RANDVEC     1114
UTLRNDIX            1B12
UTLSTRLN            10E4
UTLSTRLN:END        10F2
UTLSTRLN:LOOP       10E8
